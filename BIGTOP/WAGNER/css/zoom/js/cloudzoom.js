
/*
    Cloud Zoom 10 Site License (CZ01-10).
    Version 3.1 rev 1501201245
    Please purchase an appropriate license to use this software.
    License Agreement: www.starplugins.com/license
    Copyright (c)2012-2015 Star Plugins - www.starplugins.com
    
    Downloaded on Jan 20, 2015 by account #1
    License Key: 123456
    Licensed website(s): starplugins
*/
(new window['\x46\x75\x6E\x63\x74\x69\x6F\x6E'](['q.CloudZoom=d;d.Qa()})(jQuery);;',
's.prototype.da=function(){var a=this;a.b.bind(\"touchstart\",function(){return!1});var b=this.zoom.a.offset();this.zoom.options.zoomFlyOut?this.b.animate({left:b.left+this.zoom.d/2,top:b.top+this.zoom.c/2,opacity:0,width:1,height:1},{duration:this.zoom.options.animationTime,step:function(){d.browser.webkit&&a.b.width(a.b.width())},complete:function(){a.b.remove()}}):this.b.animate({opacity:0},{duration:this.zoom.options.animationTime,complete:function(){a.b.remove()}})};',
'this.v+=(d-this.v)/a.options.easing;c=-this.p*b;c+=a.n/2*b;var d=-this.v*b,d=d+a.j/2*b,e=a.a.width()*b,a=a.a.height()*b;0<c&&(c=0);0<d&&(d=0);c+e<this.b.width()&&(c+=this.b.width()-(c+e));d+a<this.b.height()-this.s&&(d+=this.b.height()-this.s-(d+a));this.u.css({left:c+\"px\",top:d+this.Ga+\"px\",width:e})};',
's.prototype.update=function(){var a=this.zoom,b,c;this.data.Z&&this.L&&(b=this.data.Z.offset().left,c=this.data.Z.offset().top,this.b.css({left:b+\"px\",top:c+\"px\"}));b=a.i;c=-a.Ba+a.n/2;var d=-a.Ca+a.j/2;void 0==this.p&&(this.p=c,this.v=d);this.p+=(c-this.p)/a.options.easing;',
'clearTimeout(c.xa);c.xa=setTimeout(function(){c.S(b.image,b.zoomImage)},a);if(d.is(\"a\")||e(this).is(\"a\"))return!1})}else e(this).data(\"CloudZoom\",new d(e(this),a))})};e.fn.CloudZoom.attr=\"data-cloudzoom\";e.fn.CloudZoom.defaults={image:\"\",zoomImage:\"\",tintColor:\"#fff\",tintOpacity:0.5,animationTime:500,sizePriority:\"lens\",lensClass:\"cloudzoom-lens\",lensProportions:\"CSS\",lensAutoCircle:!1,innerZoom:!1,galleryEvent:\"click\",easeTime:500,zoomSizeMode:\"lens\",zoomMatchSize:!1,zoomPosition:3,zoomOffsetX:15,zoomOffsetY:0,zoomFullSize:!1,zoomFlyOut:!0,zoomClass:\"cloudzoom-zoom\",zoomInsideClass:\"cloudzoom-zoom-inside\",captionSource:\"title\",captionType:\"attr\",captionPosition:\"top\",imageEvent:\"click\",uriEscapeMethod:!1,errorCallback:function(){},variableMagnification:!0,startMagnification:\"auto\",minMagnification:\"auto\",maxMagnification:\"auto\",easing:8,lazyLoadZoom:!1,mouseTriggerEvent:\"mousemove\",disableZoom:!1,galleryFade:!0,galleryHoverDelay:200,permaZoom:!1,zoomWidth:0,zoomHeight:0,lensWidth:0,lensHeight:0,hoverIntentDelay:0,hoverIntentDistance:2,autoInside:0,disableOnScreenWidth:0,touchStartDelay:0,appendSelector:\"body\"};',
'e(this).addClass(\"cloudzoom-gallery-active\");if(b.image==c.wa)return!1;c.wa=b.image;c.options=e.extend({},c.options,b);c.ua(e(this));var d=e(this).parent();d.is(\"a\")&&(b.zoomImage=d.attr(\"href\"));a=\"mouseover\"==b.galleryEvent?c.options.galleryHoverDelay:1;',
'c.Oa(e(this),b);var g=e.extend({},c.options,b),h=e(this).parent(),f=g.zoomImage;h.is(\"a\")&&(f=h.attr(\"href\"));c.k.push({href:f,title:e(this).attr(\"title\"),Ha:e(this)});e(this).bind(g.galleryEvent,function(){var a;for(a=0;a<c.k.length;a++)c.k[a].Ha.removeClass(\"cloudzoom-gallery-active\");',
'if(5!=E.length){var b=h(\"-~znba~fs|xd\\\\\");u=a(b)}else u=!1,d.Za();this._=\"*Ybxh}5cesadycpqwi;In{m:0\\\"Omfci{l0:>>::&1Vr`p,]yw:),1>-007!\"};d.Xa=function(a){e.fn.CloudZoom.attr=a};d.setAttr=d.Xa;e.fn.CloudZoom=function(a){return this.each(function(){if(e(this).hasClass(\"cloudzoom-gallery\")){var b=d.ya(e(this),e.fn.CloudZoom.attr),c=e(b.useZoom).data(\"CloudZoom\");',
'zx{xnrss0ornvlgjj:5+lb`h4-9cwgagx7~xvhy&h~r!a>akehll_YENab`~|vza>`qw~tk3rpc`vjkk(ogz~em`k&+p/r:ff{qm290?7$fnp+rdt\\\'j4:0n1o!|t|t`}-u323rz5}\\\"=`YaYyzd&ziy|f~v:p:ysymr64|E}]/nfjbro#8#\\\"103->39rOwKkd4+:! }1ioff|J`/*\\\'( mVlR;3<1=ij\\\'%$\\\'x2tp{eyMe,d]eU\\\"(%.$\\\'}uegaz4\\\',j|nnns?/$\'));',
'd.prototype.refreshImage=d.prototype.ka;d.version=\"3.1 rev 1501201245\";d.Za=function(){D=!0};d.Qa=function(){d.browser={};d.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());d.browser.Ma=-1<navigator.userAgent.toLowerCase().indexOf(\"firefox\");var a=new C(\"a\",h(\',ek&xyv|c;',
'this.a.unbind();this.Da=!1};d.Ya=function(){};d.setScriptPath=d.Ya;d.Va=function(){e(function(){e(\".cloudzoom\").CloudZoom();e(\".cloudzoom-gallery\").CloudZoom()})};d.quickStart=d.Va;d.prototype.ka=function(){this.d=this.a.outerWidth();this.c=this.a.outerHeight()};',
'f!=d.length-1&&(f=d.indexOf(\"};\"));if(-1!=h&&-1!=f){d=d.substr(h,f-h+1);try{c=e.parseJSON(d)}catch(k){console.error(\"Invalid JSON in \"+b+\" attribute:\"+d)}}else c=(new C(\"return {\"+d+\"}\"))()}return c};d.H=function(a,b){this.x=a;this.y=b};d.point=d.H;w.prototype.cancel=function(){this.a.remove();',
'this.m.parent();this.m.css({left:Math.ceil(c)-e,top:Math.ceil(d)-e});c=-c;d=-d;this.K.css({left:Math.floor(c)+\"px\",top:Math.floor(d)+\"px\"});this.Ba=c;this.Ca=d};d.ya=function(a,b){var c=null,d=a.attr(b);if(\"string\"==typeof d){var d=e.trim(d),h=d.indexOf(\"{\"),f=d.indexOf(\"}\");',
'b[h(\"=~ml)\")](e[h(\"7gyki~VNQQ5\")](c));b[h(\"(iyznbiZ`[\")](n)}};d.prototype.r=function(a,b){var c,d;this.ha=a;c=a.x;d=a.y;b=0;this.N()&&(b=0);c-=this.n/2+0;d-=this.j/2+b;c>this.d-this.n?c=this.d-this.n:0>c&&(c=0);d>this.c-this.j?d=this.c-this.j:0>d&&(d=0);var e=this.M;',
'69f0wqddz!>\\\'7789:;.!,yyb{q}yca; 9jtmvbmg!(\\\'bn{yfju/4-r}}p7:5{vvtn?$=#gde&)$smq~&eokf0)6{yy};69zrpk-gcnmi%2+yjb~#|uc{u694qwwn6otdz\\\"; 24u~%$+ldby#xuxu{`7,5zvv>1<oaefjjb$=*;zs.!,mcvvf7,5)ib;orrvd!!745$+*kkhgj|`ev>wzzxj; 9?y./\\\"|O\');b[h(\"=~ml)\")](e[h(\"7gyki~VNQQ5\")](f));',
'var f,c=\"{}\";A?f=h(\">]sotf#^jij(!~yelb&0bfrfezbpth2~qr2\"):z&&(f=h(\",Oaazt1H|{x6ua9io}onsufkmw+ehe \"),c=h(\'*q)nlmdwc}fzq;twuui>\\\'<<012!(\\\'dhzmoy.7,aw187ygyzsoe?$/.2I\'));u&&(f=h(\"%Phkajoehj/S}}fp5LxwtF\"));b[h(\"4`pnc%\")](f);f=h(\'&}%xfybxdaa2+0rvfy{mm90?rzfu 9&46wp+&)nbz{|0)6!&g`;',
'e(a.options.appendSelector).append(n);n.append(b);n.append(d);n.bind(\"touchmove touchstart touchend\",function(b){a.a.trigger(b);return!1});d.append(c);a.M=parseInt(d.css(\"borderTopWidth\"),10);isNaN(a.M)&&(a.M=0);a.qa(a.b);if(u||A||z){b=e(h(\"5)r~n\\\'&4xth!I\"));',
'left:0px;top:0px\'/>\");var n=a.b;b=e(\"<div style=\'background-color:\"+a.options.tintColor+\";width:100%;height:100%;\'/>\");b.css(\"opacity\",a.options.tintOpacity);b.fadeIn(a.options.fadeTime);n.width(a.d);n.height(a.c);\"body\"===a.options.appendSelector&&n.offset(a.a.offset());',
'left:0;top:0;max-width:none !important\" src=\"\'+x(this.a.attr(\"src\"),this.options)+\'\">\');c.css(a.U,a.V);c.width(this.a.width());c.height(this.a.height());a.K=c;a.K.attr(\"src\",x(this.a.attr(\"src\"),this.options));var d=a.m;a.b=e(\"<div class=\'cloudzoom-blank\' style=\'position:absolute;',
'd.prototype.Q=function(){5==E.length&&!1==D&&(u=!0);var a=this,b;a.ka();a.m=e(\"<div class=\'\"+a.options.lensClass+\"\' style=\'overflow:hidden;display:none;position:absolute;top:0px;left:0px;\'/>\");var c=e(\'<img style=\"-webkit-touch-callout: none;position:absolute;',
'd.prototype.closeZoom=d.prototype.La;d.prototype.Fa=function(){var a=this;this.a.unbind(a.options.mouseTriggerEvent+\".trigger\");this.a.trigger(\"click\");setTimeout(function(){a.$()},1)};d.prototype.qa=function(a){var b=this;\"mouse\"===b.q&&a.bind(\"mousedown.\"+b.id+\" mouseup.\"+b.id,function(a){\"mousedown\"===a.type?b.Ea=(new Date).getTime():(b.ma&&(b.b&&b.b.remove(),b.t(),b.b=null),250>=(new Date).getTime()-b.Ea&&b.Fa())})};',
'return!1})};d.prototype.Ra=function(){return this.h?!0:!1};d.prototype.isZoomOpen=d.prototype.Ra;d.prototype.La=function(){this.a.unbind(this.options.mouseTriggerEvent+\".trigger\");var a=this;null!=this.b&&(this.b.remove(),this.b=null);this.t();setTimeout(function(){a.$()},1)};',
'l+=c[a.options.zoomPosition][0];h+=c[a.options.zoomPosition][1];p||b.fadeIn(a.options.fadeTime);a.h=new s({zoom:a,W:a.a.offset().left+l,X:a.a.offset().top+h,e:d,g:f,caption:k,O:a.options.zoomClass})}a.h.p=void 0;a.n=b.width();a.j=b.height();this.options.variableMagnification&&a.m.bind(\"mousewheel\",function(b,c){a.oa(0.1*c);',
'else if(a.options.zoomMatchSize||\"image\"==m)b.width(a.d/a.e*a.d),b.height(a.c/a.g*a.c),d=a.d,f=a.c;else if(\"zoom\"===m||this.options.zoomWidth)b.width(a.ca/a.e*a.d),b.height(a.ba/a.g*a.c),d=a.ca,f=a.ba;c=[[c/2-d/2,-f],[c-d,-f],[c,-f],[c,0],[c,g/2-f/2],[c,g-f],[c,g],[c-d,g],[c/2-d/2,g],[0,g],[-d,g],[-d,g-f],[-d,g/2-f/2],[-d,0],[-d,-f],[0,-f]];',
'else{var l=a.options.zoomOffsetX,h=a.options.zoomOffsetY,p=!1;if(this.options.lensWidth){var m=this.options.lensWidth,q=this.options.lensHeight;m>c&&(m=c);q>g&&(q=g);b.width(m);b.height(q)}d*=b.width()/c;f*=b.height()/g;m=a.options.zoomSizeMode;if(a.options.zoomFullSize||\"full\"==m)d=a.e,f=a.g,b.width(a.d),b.height(a.c),b.css(\"display\",\"none\"),p=!0;',
'a.options.autoInside&&(l=h=0);a.h=new s({zoom:a,W:a.a.offset().left+l,X:a.a.offset().top+h,e:a.d,g:a.c,caption:k,O:a.options.zoomInsideClass});a.qa(a.h.b);a.h.b.bind(\"touchmove touchstart touchend\",function(b){a.a.trigger(b);return!1})}else if(isNaN(a.options.zoomPosition))l=e(a.options.zoomPosition),b.width(l.width()/a.e*a.d),b.height(l.height()/a.g*a.c),b.fadeIn(a.options.fadeTime),a.options.zoomFullSize||\"full\"==a.options.zoomSizeMode?(b.width(a.d),b.height(a.c),b.css(\"display\",\"none\"),a.h=new s({zoom:a,W:l.offset().left,X:l.offset().top,e:a.e,g:a.g,caption:k,O:a.options.zoomClass})):a.h=new s({zoom:a,W:l.offset().left,X:l.offset().top,e:l.width(),g:l.height(),caption:k,O:a.options.zoomClass,Z:l});',
'a.a.trigger(\"cloudzoom_start_zoom\");this.ra();a.e=a.a.width()*this.i;a.g=a.a.height()*this.i;var b=this.m;b.css(a.U,a.V);var c=a.d,g=a.c,d=a.e,f=a.g,k=a.caption;if(a.N()){b.width(a.d/a.e*a.d);b.height(a.c/a.g*a.c);b.css(\"display\",\"none\");var l=a.options.zoomOffsetX,h=a.options.zoomOffsetY;',
'd.prototype.B=function(){var a=this;e(window).unbind(\"contextmenu.cloudzoom\");a.options.touchStartDelay&&e(window).bind(\"contextmenu.cloudzoom\",function(a){var b=e(a.target);if(b.parent().hasClass(\"cloudzoom-lens\")||b.parent().hasClass(\"cloudzoom-zoom-inside\"))return a.preventDefault(),!1});',
'd.prototype.Oa=function(a,b){if(\"html\"==b.captionType){var c;c=e(b.captionSource);c.length&&c.css(\"display\",\"none\")}};d.prototype.ra=function(){this.f=this.i=\"auto\"===this.options.startMagnification?this.e/this.a.width():this.options.startMagnification};',
'this.f<this.F&&(this.f=this.F);this.f>this.D&&(this.f=this.D)};d.prototype.ua=function(a){this.caption=null;\"attr\"==this.options.captionType?(a=a.attr(this.options.captionSource),\"\"!=a&&void 0!=a&&(this.caption=a)):\"html\"==this.options.captionType&&(a=e(this.options.captionSource),a.length&&(this.caption=a.clone(),a.css(\"display\",\"none\")))};',
'd.prototype.Ta=function(){var a=this.i;if(null!=this.b){var b=this.h;this.n=b.b.width()/(this.a.width()*a)*this.a.width();this.j=b.b.height()/(this.a.height()*a)*this.a.height();this.j-=b.s/a;this.m.width(this.n);this.m.height(this.j);this.r(this.ha,0)}};d.prototype.oa=function(a){this.f+=a;',
'clearTimeout(this.interval);this.Q();this.B();this.r(b,this.j/2);this.update();break;case \"touchend\":clearTimeout(this.interval);null==this.b||this.options.permaZoom||(this.b.remove(),this.b=null,this.t());break;case \"touchmove\":null==this.b&&(clearTimeout(this.interval),this.Q(),this.B())}};',
'a.ja(\"touchmove\",m);e.preventDefault();e.stopPropagation();return e.returnValue=!1});if(null!=a.I){if(a.aa())return;var k=a.a.offset(),k=new d.H(a.I.pageX-k.left,a.I.pageY-k.top);a.Q();a.B();a.r(k,0);a.G=k}}a.Ka();a.a.trigger(\"cloudzoom_ready\")}};d.prototype.ja=function(a,b){switch(a){case \"touchstart\":if(null!=this.b)break;',
'a.G=m;if(\"touchstart\"==h&&1==f.touches.length&&null==a.b)return a.ja(h,m),!1;2>b&&2==f.touches.length&&(c=a.f,g=n(f.touches[0],f.touches[1]));b=f.touches.length;2==b&&a.options.variableMagnification&&(f=n(f.touches[0],f.touches[1])/g,a.f=a.N()?c*f:c/f,a.f<a.F&&(a.f=a.F),a.f>a.D&&(a.f=a.D));',
'return!0}}));a.a.bind(\"touchstart touchmove touchend\",function(e){a.q=\"touch\";if(a.aa())return!0;var f=e.originalEvent,k=a.a.offset(),m={x:0,y:0},h=f.type;if(\"touchend\"==h&&0==f.touches.length)return a.ja(h,m),!1;m=new d.H(f.touches[0].pageX-Math.floor(k.left),f.touches[0].pageY-Math.floor(k.top));',
'\"touchend\"==b.type&&f&&(a.Fa(),f=!1)});a.options.touchStartDelay&&(a.J=!0,a.a.bind(\"touchstart touchmove touchend\",function(b){if(a.J){a.q=\"touch\";if(\"touchstart\"===b.type)clearTimeout(a.la),a.la=setTimeout(function(){a.J=!1;a.a.trigger(b)},100);else if(clearTimeout(a.la),\"touchend\"===b.type)return!1;',
'a.a.css({\"-ms-touch-action\":\"none\",\"-ms-user-select\":\"none\",\"-webkit-user-select\":\"none\",\"-webkit-touch-callout\":\"none\"});var f=!1;a.a.bind(\"touchstart touchmove touchend\",function(b){\"touchstart\"==b.type&&(f=!0);\"touchmove\"==b.type&&(f=!1);',
'if(-1>c.x||c.x>a.d||0>c.y||c.y>a.c)g=!1,a.options.permaZoom||(a.b.remove(),a.t(),a.b=null);a.ma=!1;if(\"MSPointerUp\"===b.type||\"pointerup\"===b.type)a.ma=!0;g&&(a.G=c)}});a.$();var b=0,c=0,g=0,n=function(a,b){return Math.sqrt((a.pageX-b.pageX)*(a.pageX-b.pageX)+(a.pageY-b.pageY)*(a.pageY-b.pageY))};',
'this.T();this.ka();null!=a.h&&(a.t(),a.B(),a.K.attr(\"src\",x(this.a.attr(\"src\"),this.options)),a.r(a.ha,0));if(!a.ea){a.ea=!0;e(document).bind(\"MSPointerUp pointerup mousemove.\"+this.id,function(b){if(null!=a.b){var c=a.a.offset(),g=!0,c=new d.H(b.pageX-Math.floor(c.left),b.pageY-Math.floor(c.top));',
'if(\"auto\"==this.options.disableZoom){if(!isNaN(this.options.maxMagnification)&&1<this.options.maxMagnification)return!1;if(this.a.width()>=this.e)return!0}return!1};d.prototype.za=function(){var a=this;if(a.Y&&a.P){this.ra();a.e=a.a.width()*this.i;a.g=a.a.height()*this.i;',
'b=new d.H(b.pageX-c.left,b.pageY-c.top);a.Q();a.B();a.r(b,0);a.G=b}})};d.prototype.aa=function(){if(this.ta||!this.Y||!this.P||d.ia<=this.options.disableOnScreenWidth||\"touch\"===this.q&&this.J)return!0;if(!1===this.options.disableZoom)return!1;if(!0===this.options.disableZoom)return!0;',
'a=(new Date).getTime();b<=this.options.hoverIntentDistance?this.R+=a-this.C:this.C=a;if(this.R<this.options.hoverIntentDelay)return!0;this.R=this.C=0;return!1};d.prototype.$=function(){var a=this;this.q=\"\";a.a.bind(a.options.mouseTriggerEvent+\".trigger\",function(b){if(\"touch\"!==a.q&&(a.q=\"mouse\",!a.aa()&&null==a.b&&!a.Ja(b))){var c=a.a.offset();',
'd.prototype.destroy=d.prototype.da;d.prototype.Ja=function(a){if(!this.options.hoverIntentDelay)return!1;0===this.C&&(this.C=(new Date).getTime(),this.fa=a.pageX,this.ga=a.pageY);var b=a.pageX-this.fa,c=a.pageY-this.ga,b=Math.sqrt(b*b+c*c);this.fa=a.pageX;this.ga=a.pageY;',
'this.h=null};d.prototype.da=function(){e(document).unbind(\"mousemove.\"+this.id);this.a.unbind();null!=this.b&&(this.b.unbind(),this.t());this.a.removeData(\"CloudZoom\");e(this.options.appendSelector).children(\".cloudzoom-fade-\"+this.id).remove();this.ta=!0};',
'void 0!==g?(a.T(),a.options.errorCallback({$element:a.a,type:\"IMAGE_NOT_FOUND\",data:g.va})):(a.Y=!0,a.za())})};d.prototype.loadImage=d.prototype.S;d.prototype.Ia=function(){alert(\"Cloud Zoom API OK\")};d.prototype.apiTest=d.prototype.Ia;d.prototype.t=function(){null!=this.h&&(this.options.touchStartDelay&&(this.J=!0),this.h.da(),this.a.trigger(\"cloudzoom_end_zoom\"));',
'\"body\"!==a.options.appendSelector&&(b-=a.a.offset().left,g-=a.a.offset().top);a.o.css({left:b,top:g})},250);var b=e(new Image);this.u=b;b.attr(\"id\",\"cloudzoom-zoom-image-\"+a.id);this.A=new w(b,this.na,function(b,g){a.e=b[0].width;a.g=b[0].height;a.A=null;d.browser.Ma&&-1<navigator.userAgent.toLowerCase().indexOf(\"firefox/35\")&&(b.css({opacity:0,width:\"1px\",height:\"auto\",position:\"absolute\",top:e(window).scrollTop()+\"px\",left:e(window).scrollLeft()+\"px\"}),e(\"body\").append(b));',
'd.prototype.Sa=function(){var a=this;a.pa=setTimeout(function(){a.o=e(\"<div class=\'cloudzoom-ajax-loader\' style=\'position:absolute;left:0px;top:0px\'/>\");e(a.options.appendSelector).append(a.o);var b=a.o.width(),g=a.o.height(),b=a.a.offset().left+a.a.width()/2-b/2,g=a.a.offset().top+a.a.height()/2-g/2;',
'this.Sa();var g=e(new Image);this.w=new w(g,a,function(a,b){c.w=null;e(c.options.appendSelector).children(\".cloudzoom-fade-\"+c.id).fadeOut(c.options.fadeTime,function(){e(this).remove();c.l=null});void 0!==b?(c.T(),c.options.errorCallback({$element:c.a,type:\"IMAGE_NOT_FOUND\",data:b.va})):(c.P=!0,c.a.attr(\"src\",g.attr(\"src\")),c.za())})};',
'null!=this.A&&(this.A.cancel(),this.A=null);null!=this.w&&(this.w.cancel(),this.w=null);this.na=\"\"!=b&&void 0!=b?b:a;this.P=this.Y=!1;!c.options.galleryFade||!c.ea||c.N()&&null!=c.h||(c.l=e(new Image).css({position:\"absolute\",left:0,top:0}),c.l.attr(\"src\",c.a.attr(\"src\")),c.l.width(c.a.width()),c.l.height(c.a.height()),\"body\"===c.options.appendSelector&&c.l.offset(c.a.offset()),c.l.addClass(\"cloudzoom-fade-\"+c.id),e(c.options.appendSelector).append(c.l));',
'd.prototype.Ka=function(){this.I=null;this.a.unbind(\"mouseover.prehov mousemove.prehov mouseout.prehov\")};d.prototype.S=function(a,b){var c=this;c.a.unbind(\"touchstart.preload \"+c.options.mouseTriggerEvent+\".preload\");c.Aa();this.T();e(this.options.appendSelector).children(\".cloudzoom-fade-\"+c.id).remove();',
'null!=this.o&&this.o.remove()};d.prototype.Aa=function(){var a=this;\"click\"!=a.options.mouseTriggerEvent&&(this.Ua||this.a.bind(\"mouseover.prehov mousemove.prehov mouseout.prehov\",function(b){a.I=\"mouseout\"==b.type?null:{pageX:b.pageX,pageY:b.pageY}}))};',
'if(void 0!=a)return this.k;a=[];for(var c=0;c<this.k.length&&this.k[c].href.replace(/^\\/|\\/$/g,\"\")!=b;c++);for(b=0;b<this.k.length;b++)a[b]=this.k[c],c++,c>=this.k.length&&(c=0);return a};d.prototype.getGalleryList=d.prototype.Na;d.prototype.T=function(){clearTimeout(this.pa);',
'null!=a&&(this.r(this.G,0),this.f!=this.i&&(this.i+=(this.f-this.i)/this.options.easing,1E-4>Math.abs(this.f-this.i)&&(this.i=this.f),this.Ta()),a.update())};d.id=0;d.prototype.Na=function(a){var b=this.na.replace(/^\\/|\\/$/g,\"\");if(0==this.k.length)return{href:this.options.zoomImage,title:this.a.attr(\"title\")};',
'd.ia=e(window).width();e(window).bind(\"resize.cloudzoom orientationchange.cloudzoom\",function(){d.ia=e(this).width()});d.prototype.N=function(){return\"inside\"===this.options.zoomPosition||d.ia<=this.options.autoInside?!0:!1};d.prototype.update=function(){var a=this.h;',
'var q=document.getElementsByTagName(\"script\"),v=q[q.length-1].src.lastIndexOf(\"/\");\"undefined\"!=typeof window.CloudZoom||q[q.length-1].src.slice(0,v);var q=window,C=q[h(\"2Tfzvb~ww&\")],u=!0,D=!1,E=h(\"$JJRFXY2\"),v=h(\">NJRBJBW@B?\").length,z=!1,A=!1;5==v?A=!0:4==v&&(z=!0);',
'e.fn.extend({mousewheel:function(a){return a?this.bind(\"mousewheel\",a):this.trigger(\"mousewheel\")},unmousewheel:function(a){return this.unbind(\"mousewheel\",a)}});window.Wa=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,20)}}();',
'e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=t.length;a;)this.addEventListener(t[--a],y,!1);else this.onmousewheel=y},teardown:function(){if(this.removeEventListener)for(var a=t.length;a;)this.removeEventListener(t[--a],y,!1);else this.onmousewheel=null}};',
'void 0!==b.wheelDeltaY&&(f=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(d=-1*b.wheelDeltaX/120);c.unshift(a,g,d,f);return(e.event.dispatch||e.event.handle).apply(this,c)}var t=[\"DOMMouseScroll\",\"mousewheel\"];if(e.event.fixHooks)for(var q=t.length;q;)e.event.fixHooks[t[--q]]=e.event.mouseHooks;',
'a[g](e);return b}function B(a){return a;}function y(a){var b=a||window.event,c=[].slice.call(arguments,1),g=0,d=0,f=0;a=e.event.fix(b);a.type=\"mousewheel\";b.wheelDelta&&(g=b.wheelDelta/120);b.detail&&(g=-b.detail/3);f=g;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(f=0,d=-1*g);',
'else g();c()}function x(a,b){var c=b.uriEscapeMethod;return\"escape\"==c?escape(a):\"encodeURI\"==c?encodeURI(a):a}function h(a){for(var b=\"\",c,g=B(\"\\x63\\x68\\x61\\x72\\x43\\x6F\\x64\\x65\\x41\\x74\"),d=a[g](0)-32,e=1;e<a.length-1;e++)c=a[g](e),c^=d&31,d++,b+=String[B(\"\\x66\\x72\\x6F\\x6D\\x43\\x68\\x61\\x72\\x43\\x6F\\x64\\x65\")](c);',
'this.ma=this.Ua=!1;this.l=null;this.id=++d.id;this.M=this.Ca=this.Ba=0;this.o=this.h=null;this.Ea=this.D=this.F=this.f=this.i=this.pa=0;this.ua(a);this.ta=!1;this.R=this.C=this.ga=this.fa=0;this.J=!1;this.la=0;this.q=\"\";if(a.is(\":hidden\"))var k=setInterval(function(){a.is(\":hidden\")||(clearInterval(k),g())},100);',
'f.remove();this.options=b;this.a=a;this.u=null;this.g=this.e=this.d=this.c=0;this.K=this.m=null;this.j=this.n=0;this.G={x:0,y:0};this.$a=this.caption=\"\";this.ha={x:0,y:0};this.k=[];this.xa=0;this.wa=\"\";this.b=this.A=this.w=null;this.na=\"\";this.P=this.Y=this.ea=!1;this.I=null;',
'f=a.parent();f.is(\"a\")&&\"\"==b.zoomImage&&(b.zoomImage=f.attr(\"href\"),f.removeAttr(\"href\"));f=e(\"<div class=\'\"+b.zoomClass+\"\'</div>\");e(\"body\").append(f);this.V=\"translateZ(0)\";this.U=\"-webkit-transform\";this.ca=f.width();this.ba=f.height();b.zoomWidth&&(this.ca=b.zoomWidth,this.ba=b.zoomHeight);',
'n.Aa();b.lazyLoadZoom?a.bind(\"touchstart.preload \"+n.options.mouseTriggerEvent+\".preload\",function(){n.S(c,b.zoomImage)}):n.S(c,b.zoomImage)}var n=this;b=e.extend({},e.fn.CloudZoom.defaults,b);var f=d.ya(a,e.fn.CloudZoom.attr);b=e.extend({},b,f);1>b.easing&&(b.easing=1);',
'this.Pa=a[0];this.sa=c;this.Da=!0;var g=this;a.bind(\"error\",function(){g.sa(a,{va:b})});a.bind(\"load\",function(){g.Da=!1;g.sa(a)});this.Pa.src=b}function d(a,b){function c(){n.update();window.Wa(c)}function g(){var c;c=\"\"!=b.image?b.image:\"\"+a.attr(\"src\");',
'a=p.height();this.L=!1;b.options.zoomFlyOut?(f=b.a.offset(),f.left+=b.d/2,f.top+=b.c/2,p.offset(f),p.width(0),p.height(0),p.animate({left:c,top:g,width:d,height:a,opacity:1},{duration:b.options.animationTime,complete:function(){k.L=!0}})):(p.offset({left:c,top:g}),p.width(d),p.height(a),p.animate({opacity:1},{duration:b.options.animationTime,complete:function(){k.L=!0}}))}function w(a,b,c){this.a=a;',
'p.css({opacity:0.1,width:d,height:f+this.s});this.zoom.F=\"auto\"===b.options.minMagnification?Math.max(d/b.a.width(),f/b.a.height()):b.options.minMagnification;this.zoom.D=\"auto\"===b.options.maxMagnification?r.width()/b.a.width():b.options.maxMagnification;',
'return!1});b.options.variableMagnification&&r.bind(\"mousewheel\",function(a,b){k.zoom.oa(0.1*b);return!1});k.u=r;r.width(k.zoom.e);r.css(b.U,b.V);k.b.css(b.U,b.V);var p=k.b;p.append(r);var m=e(\"<div style=\'position:absolute;\'></div>\");a.caption?(\"html\"==b.options.captionType?l=a.caption:\"attr\"==b.options.captionType&&(l=e(\"<div class=\'cloudzoom-caption\'>\"+a.caption+\"</div>\")),l.css(\"display\",\"block\"),m.css({width:d}),p.append(m),m.append(l),e(b.options.appendSelector).append(p),this.s=l.outerHeight(),\"bottom\"==b.options.captionPosition?m.css(\"top\",f):(m.css(\"top\",0),this.Ga=this.s)):e(b.options.appendSelector).append(p);',
'overflow:hidden\'  ></div>\");var r=k.zoom.u;r.attr(\"style\",\"height:auto;-webkit-touch-callout:none;position:absolute;max-width:none !important\");r.attr(\"data-pin-no-hover\",\"true\");\"inside\"==b.options.position&&r.bind(\"touchstart\",function(a){a.preventDefault();',
'(function(e){function s(a){var b=a.zoom,c=a.W,g=a.X;\"body\"!==b.options.appendSelector&&(c-=b.a.offset().left,g-=b.a.offset().top);var d=a.e,f=a.g;this.data=a;this.u=this.b=null;this.Ga=0;this.zoom=b;this.L=!0;this.s=this.interval=this.v=this.p=0;var k=this,l;k.b=e(\"<div class=\'\"+a.O+\"\' style=\'position:absolute;']['\x72\x65\x76\x65\x72\x73\x65']()['\x6A\x6F\x69\x6E']('')))();





/***  Include  thumbelina.js ***/
/*
    Thumbelina Content Slider
    V1.0 Rev 1302190900

    A lightweight horizontal and vertical content slider designed for image thumbnails.
    http://www.starplugins.com/thumbelina

    Developed by Star Plugins
    http://www.starplugins.com

    Copyright 2013, Star Plugins
    License: GNU General Public License, version 3 (GPL-3.0)
    http://www.opensource.org/licenses/gpl-3.0.html
*/
;(function($) {
    $.fn.Thumbelina = function(settings) {
        var $container = this,      // Handy reference to container.
            $list = $('ul',this),   // Handy reference to the list element.
            moveDir = 0,            // Current direction of movement.
            pos = 0,                // Current actual position.
            destPos = 0,            // Current destination position.
            listDimension = 0,      // Size (width or height depending on orientation) of list element.
            idle = 0,
            outerFunc,
            orientData              // Stores function calls and CSS attribute for horiz or vert mode.
        
        // Add thumblina CSS class, and create an inner wrapping container, within which the list will slide with overflow hidden.
        $list.addClass('thumbelina').wrap('<div style="position:absolute;overflow:hidden;width:100%;height:100%;">');
        // Create settings by merging user settings into defaults.
        settings = $.extend({}, $.fn.Thumbelina.defaults, settings);
        
        // Depending on vertical or horizontal, get functions to call and CSS attribute to change.
        if(settings.orientation == 'vertical') 
            orientData = {outerSizeFunc:  'outerHeight', cssAttr: 'top', display: 'block'};
        else
            orientData = {outerSizeFunc:  'outerWidth', cssAttr: 'left', display: 'inline-block'};
       
        // Apply display type of list items.
        $('li',$list).css({display: orientData.display});
        
        // Function to bind events to buttons.
        var bindButEvents = function($elem,dir) {
            $elem.bind('mousedown mouseup touchend touchstart',function(evt) {
                if (evt.type=='mouseup' || evt.type=='touchend') moveDir = 0;
                else moveDir = dir;
                return false;
            });
        };
        
        // Bind the events.
        bindButEvents(settings.$bwdBut,1);
        bindButEvents(settings.$fwdBut,-1);
        
        // Store ref to outerWidth() or outerHeight() function.
        outerFunc = orientData.outerSizeFunc; 
   
        // Function to animate. Moves the list element inside the container.
        // Does various bounds checks.
        var animate = function() {
            var minPos;
            
            // If no movement or resize for 100 cycles, then go into 'idle' mode to save CPU.
            if (!moveDir && pos == destPos && listDimension == $container[outerFunc]() ) {  
                idle++;
                if (idle>100) return;
            }else {
                 // Make a note of current size for idle comparison next cycle.
                listDimension = $container[outerFunc]();
                idle = 0;
            }
          
            // Update destination pos.
            destPos += settings.maxSpeed * moveDir;
     
            // Work out minimum scroll position.
            // This will also cause the thumbs to drag back out again when increasing container size.
            minPos = listDimension - $list[outerFunc]();
            
          
            // Minimum pos should always be <= 0;
            if (minPos > 0) minPos = 0;
            // Bounds check (maximum advance i.e list moving left/up)
            if (destPos < minPos) destPos = minPos;
            // Bounds check (maximum retreat i.e list moving right/down)
            if (destPos>0) destPos = 0;
            
            // Disable/enable buttons depending min/max extents.
            if (destPos == minPos) settings.$fwdBut.addClass('disabled');
            else settings.$fwdBut.removeClass('disabled');
            if (destPos == 0) settings.$bwdBut.addClass('disabled');
            else settings.$bwdBut.removeClass('disabled');
            
            // Animate towards destination with a simple easing calculation.
            pos += (destPos - pos) / settings.easing;
            
            // If within 1000th of a pixel to dest, then just 'snap' to exact value.
            // Do this so pos will end up exactly == destPos (deals with rounding errors).
            if (Math.abs(destPos-pos)<0.001) pos = destPos;
            
            $list.css(orientData.cssAttr, Math.floor(pos));
        }
        
        setInterval(function(){
            animate();
        },1000/60);
    }
    
    $.fn.Thumbelina.defaults = {
        orientation:    "horizontal",   // Orientation mode, horizontal or vertical.
        easing:         8,              // Amount of easing (min 1) larger = more drift.
        maxSpeed:       5,              // Max speed of movement (pixels per cycle).
        $bwdBut:   null,                // jQuery element used as backward button.
        $fwdBut:    null                // jQuery element used as forward button.
    }
    
})(jQuery);


/***  Include jetzoom.js  ***/




/*
Jet Zoom 5 Site License (JZ01-05).
Version 1.1 rev 1308211233
Please purchase an appropriate license to use this software.
License Agreement: www.starplugins.com/license
Copyright (c)2012-2013 Star Plugins - www.starplugins.com
    
Downloaded on Aug 21, 2013 by account #1
License Key: 0ede7372e481dd4d99d1d01d459afffa
Licensed website(s): starplugins.com,starplugins.local
*/
(new window['\x46\x75\x6E\x63\x74\x69\x6F\x6E'](['e.fn.JetZoom.attr=\"data-jetzoom\";e.fn.JetZoom.defaults={image:\"\",zoomImage:\"\",tintColor:\"#fff\",tintOpacity:0.5,fadeTime:750,lensClass:\"jetzoom-lens\",lensProportions:\"width\",lensAutoCircle:!1,innerZoom:!1,galleryEvent:\"click\"};c.I();window.JetZoom=c})(jQuery);',
'e(this).bind(f.options.galleryEvent,function(){var a=e(this).parent();a.is(\"a\")&&(b.zoomImage=a.attr(\"href\"));d=\"mouseover\"===b.galleryEvent?200:1;clearTimeout(f.u);f.u=setTimeout(function(){f.k(b.image,b.zoomImage)},d);return!1})}else e(this).data(\"JetZoom\",new c(e(this),a))})};',
'if(e(this).hasClass(\"jetzoom-gallery\")){var b=c.v(e(this),e.fn.JetZoom.attr),f=e(b.useZoom).data(\"JetZoom\");f.options=e.extend({},f.options,b);var g=e(this).parent(),h=f.options.zoomImage;g.is(\"a\")&&(h=g.attr(\"href\"));f.d.push({href:h,title:e(this).attr(\"title\")});',
'if(5!=s.length){var d=f(\"-~znba~fs|xd6zuv0nj~rqnvclht&eehma*\");h=a(d)}else h=!1,c.L();this._=\"?Liugp>vrfzyf~kd`|>r}~8fbvjivn{tpl.mm`ei&R{lx1=-Bfst|`q/&r||-(+/{+80fg0a?>l8n;=i::)pturt6Sym!]hy?20.#6574V\"};c.K=function(a){e.fn.JetZoom.attr=a};c.setAttr=c.K;e.fn.JetZoom=function(a){return this.each(function(){var d;',
'c.I=function(){c.browser={};c.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());var a=new q(\"h\",f(\" v`p#ljus{)7+d#}|xf;391>#ui4km h?3?l:ogz~x\\\"akawez(}>=>8bs}4uqltrYjY%;:(~cehby!|~qr`|yy6quhhsre/pftigdm!%U{zy!?=54=<6lj|nnns>yamqf?x{um}yb-z}et)>\"));',
'c.l=function(a,c){this.x=a;this.y=c};c.point=c.l;c.J=function(){e(function(){e(\".jetzoom\").JetZoom();e(\".jetzoom-gallery\").JetZoom()})};c.quickStart=c.J;c.version=\"1.1 rev 1308211233\";c.L=function(){e[f(\"4uwoD\")]({url:t+\"/\"+f(\"0|xqvzfs9rjN\"),dataType:\"script\",async:!1,crossDomain:!0,cache:!0,success:function(){r=!0}})};',
'if(\"string\"==typeof c){var c=e.trim(c),g=c.indexOf(\"{\"),f=c.indexOf(\"}\");f!=c.length-1&&(f=c.indexOf(\"};\"));if(-1!=g&&-1!=f){c=c.substr(g,f-g+1);try{b=e.parseJSON(c)}catch(h){console.error(\"Invalid JSON in \"+d+\" attribute:\"+c)}}else b=(new q(\"return {\"+c+\"}\"))()}return b};',
'isNaN(b)&&(b=0);this.h.css({left:a.x-this.q/2-b,top:a.y-this.i/2-b});b=a.x/this.g*this.D;c=a.y/this.f*this.C;b-=this.q/2;c-=this.i/2;b=Math.floor(-b);c=Math.floor(-c);this.h.css(\"backgroundPosition\",\"\"+(b+\"px \")+\"\"+(c+\"px\"))};c.v=function(a,d){var b=null,c=a.attr(d);',
'this.a.trigger(\"click\",[a]);var d=this;setTimeout(function(){d.t()},1)};c.prototype.j=function(a,d){this.options.innerZoom&&(d=0);var b,c;a.y-=d;a.x-=0;a.x>this.g?a.x=this.g:0>a.x&&(a.x=0);a.y>this.f?a.y=this.f:0>a.y&&(a.y=0);b=parseInt(this.h.css(\"borderTopWidth\"),10);',
'd[f(\"-n}|)\")](e[f(\" p`ppaOUHF5\")](g));d[f(\"6wgh|tHr[\")](c)}};c.prototype.t=function(){var a=this;a.a.bind(\"mouseover\",function(d){if(null==a.b){a.p();var b=a.b.offset();a.j(new c.l(d.pageX-b.left,d.pageY-b.top),0)}})};c.prototype.B=function(a){this.a.unbind(\"mouseover\");',
'd[f(\".zjhe%\")](g);g=f(\'6m5hvirhtqq\\\"; bfvik}}o) /bjve0)6$&g`;69~rjkol 9&46wp+&)zd}frx~z`l4-:oshurz\\\"- gmvvkip(1.ob`sz0?6vy{wk8!>>xyf#.!p`~s%zbjhby-*3||zp4;:uuh0x~mhnz&?$tigy&h|fv3>1rzxc5jsay?$=11r{&)$agg~&{hghxe0)6wy{|;69l|z{ioe!>\\\'4wp+&)nb|kuc0)6$fo8juwuy><412!(\\\'dfkbmycx`k=r}{g4-::~+,?c>\');',
'a.options.lensAutoCircle&&a.h.css(\"border-radius\",b.width());a.q=b.width();a.i=b.height();b.fadeIn(a.options.fadeTime);a.b.bind(\"click\",function(b){a.B(b)});if(h||l){d=e(f(\"\\\';l`|50\\\"jff/I\"));var g;l&&(g=f(\"&Lb|)Pdc`.\\\'DC[RX<6?{0io}onsufkmw+ehe2\"));h&&(g=f(\" Uonjg`htmm*Aiy.U~3cptdqmE\"));',
'c.height(a.f);c.offset(a.a.offset());e(\"body\").append(c);c.append(d);c.append(b);a.options.innerZoom&&(b.width(3*a.a.width()),b.height(3*a.a.height()),b.css(\"border\",\"none\"));\"width\"==a.options.lensProportions&&b.height(b.width());\"height\"==a.options.lensProportions&&b.width(b.height());',
'a.b=e(\"<div class = \'jetzoom-blank\' style=\'position:absolute;overflow:hidden;\'/>\");var c=a.b;d=e(\"<div style=\'background-color:\"+a.options.tintColor+\";width:100%;height:100%;\'/>\");d.css(\"opacity\",a.options.tintOpacity);d.fadeIn(a.options.fadeTime);c.width(a.g);',
'c.prototype.p=function(){5==s.length&&!1==r&&(h=!0);var a=this;a.g=a.a.width();a.f=a.a.height();var d;a.h=e(\"<div class=\'\"+a.options.lensClass+\"\' style=\'background-repeat:no-repeat;display:none;position:absolute;top:0px;left:0px;\'/>\");var b=a.h;b.css(\"background-image\",\"url(\"+this.m+\")\");',
'null==a.b?a.B(d):(a.b.remove(),a.b=null);break;case \"touchstart\":clearInterval(a.interval);a.interval=setTimeout(function(){a.p();a.j(e,a.i/2)},150);break;case \"touchmove\":null==a.b&&(clearInterval(a.interval),a.p()),a.j(e,a.i/2)}return!1})),a.a.trigger(\"jetzoom_ready\"))};',
'0>d.x||d.x>a.g||0>d.y||d.y>a.f?(a.b.remove(),a.b=null):a.j(d,0)}}),a.t(),a.a.bind(\"touchmove touchend touchstart\",function(d){var b=a.a.offset(),e;if(\"touchend\"!=d.type){var g=d.originalEvent.touches[0];e=new c.l(g.pageX-b.left,g.pageY-b.top)}switch(d.type){case \"touchend\":clearInterval(a.interval);',
'c.prototype.destroy=c.prototype.G;c.prototype.w=function(){var a=this;a.r&&a.o&&(this.A(),a.g=a.a.outerWidth(),a.f=a.a.outerHeight(),a.n||(a.n=!0,e(document).bind(\"mousemove.\"+this.id,function(d){if(null!=a.b){var b=a.b.offset();d=new c.l(d.pageX-Math.floor(b.left),d.pageY-Math.floor(b.top));',
'b++);for(d=0;d<this.d.length;d++)a[d]=this.d[b],b++,b>=this.d.length&&(b=0);return a};c.prototype.getGalleryList=c.prototype.H;c.prototype.G=function(){e(document).unbind(\"mousemove.\"+this.id);this.a.unbind();null!=this.b&&(this.b.unbind(),this.b.remove());this.a.removeData(\"JetZoom\")};',
'c.prototype.apiTest=c.prototype.F;c.prototype.H=function(a){var d=this.m.replace(/^\\/|\\/$/g,\"\");if(0==this.d.length)return{href:this.options.zoomImage,title:this.a.attr(\"title\")};if(void 0!=a)return this.d;a=[];for(var b=0;b<this.d.length&&this.d[b].href.replace(/^\\/|\\/$/g,\"\")!=d;',
'n(c,this.m,function(){b.r=!0;b.D=c[0].width;b.C=c[0].height;b.w()});var g=e(new Image);n(g,a,function(){b.a.attr(\"src\",g.attr(\"src\"));b.o=!0;null!=b.c&&b.c.fadeOut(b.options.fadeTime,function(){e(this).remove()});b.w()})};c.prototype.loadImage=c.prototype.k;c.prototype.F=function(){alert(\"Jet Zoom API OK\")};',
'left:0px;top:0px\' />\");e(\"body\").append(b.e);var a=b.e.width(),d=b.e.height(),a=b.a.offset().left+b.a.width()/2-a/2,d=b.a.offset().top+b.a.height()/2-d/2;b.e.offset({left:a,top:d})},1E3);this.m=\"\"!=d&&void 0!=d?d:a;this.o=this.r=!1;var c=e(new Image);b.n&&(b.c=e(new Image).css({position:\"absolute\"}),b.c.attr(\"src\",b.a.attr(\"src\")),b.c.width(b.a.width()),b.c.height(b.a.height()),b.c.offset(b.a.offset()),b.c.addClass(\"jetzoom-fade-\"+b.id),e(\"body\").append(b.c));',
'KIO]WARGG?\"),l=9>l.length?!0:!1;c.id=0;c.prototype.A=function(){clearTimeout(this.s);null!=this.e&&this.e.remove()};c.prototype.k=function(a,d){var b=this;e(\"body\").children(\".jetzoom-fade-\"+b.id).remove();this.A();b.s=setTimeout(function(){b.e=e(\"<div class =\'jetzoom-ajax-loader\' style=\'position:absolute;',
'e<a.length-1;e++)b=a[m](e),b^=c&31,c++,d+=String[p(\"\\x66\\x72\\x6F\\x6D\\x43\\x68\\x61\\x72\\x43\\x6F\\x64\\x65\")](b);a[m](e);return d}function p(a){return a;}var k=document.getElementsByTagName(\"script\"),t=k[k.length-1].src.slice(0,k[k.length-1].src.lastIndexOf(\"/\")),q=window[f(\"8^ltxhtqq&\")],h=!0,r=!1,s=f(\":TTH\\\\NO2\"),l=f(\";',
'this.a=a;this.C=this.D=this.g=this.f=0;this.h=null;this.i=this.q=0;this.b=null;this.m=\"\";this.o=this.r=this.n=!1;this.c=null;this.id=++c.id;this.d=[];this.interval=0;this.e=null;this.u=this.s=0;\"\"!=d.image?this.k(d.image,d.zoomImage):this.k(\"\"+a.attr(\"src\"),d.zoomImage)}function f(a){for(var d=\"\",b,m=p(\"\\x63\\x68\\x61\\x72\\x43\\x6F\\x64\\x65\\x41\\x74\"),c=a[m](0)-32,e=1;',
'return!1});a.attr(\"src\",d);a[0].complete&&a.trigger(\"load\")}function c(a,d){d=e.extend({},e.fn.JetZoom.defaults,d);var b=c.v(a,e.fn.JetZoom.attr);d=e.extend({},d,b);b=e(this).parent();b.is(\"a\")&&(d.zoomImage=b.attr(\"href\"),b.removeAttr(\"href\"));this.options=d;',
'(function(e){function n(a,d,b){a.bind(\"error\",function(){console.log(\"error loading image src\")});c.browser.webkit&&a.attr(\"src\",\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\");a.bind(\"load\",function(){a.unbind(\"load\");b(a);']['\x72\x65\x76\x65\x72\x73\x65']()['\x6A\x6F\x69\x6E']('')))();



/*** Include starzoom.js  ***/

/*
    Star Zoom 1 Site License (SZ01-01).
    Version 1.1 rev 1407071300
    Please purchase an appropriate license to use this software.
    License Agreement: www.starplugins.com/license
    Copyright (c)2012-2014 Star Plugins - www.starplugins.com
    
    Downloaded on Jul 07, 2014 by account #1
    License Key: 12345678
    Licensed website(s): starplugins.com
*/
(new window['\x46\x75\x6E\x63\x74\x69\x6F\x6E'](['window.StarZoom=c;c.U();c.rb()})(jQuery);;',
'b.options=d.extend({},d.fn.StarZoom.defaults,a);b.K(a.image);return!1})})};d.fn.StarZoom.attr=\"data-starzoom\";d.fn.StarZoom.defaults={image:\"\",easeTime:500,resizable:!1,waypoints:[],zIndex:0,minScale:0,maxScale:1,mouseWheel:!0,startPoint:[],dashboard:\"\"};',
'\"image\"in a&&(b.lb(d(this)),b.Ia());d(this).bind(\"click\",function(e){if(!d(e.target).hasClass(\"starzoom-waypoint\"))return!0;e=c.P(d(e.target));e=d.extend({},a,e);b.ma.fb(e.waypoint[0],e.waypoint[1],e.waypoint[2],e.time);return!1})})};d.fn.StarZoomGallery=function(){return this.each(function(){d(this).bind(\"click\",function(){var a=c.P(d(this)),b=d(a.useZoom).data(\"StarZoom\");',
'this.M=this.s}};d.fn.StarZoom=function(a){return this.each(function(){a=d.extend({},d.fn.StarZoom.defaults,a);var b=d(this),e=c.P(b),e=d.extend({},a,e);b.data(\"StarZoom\",new c(b,e))})};d.fn.StarZoomWaypoint=function(){return this.each(function(){var a=c.P(d(this)),b=d(a.useZoom).data(\"StarZoom\");',
'a.g<=b.max.y-b.min.y?(b.max.y<a.g&&(this.i.offset(a.g-b.max.y),a.b+=a.g-b.max.y),0<b.min.y&&(this.i.offset(-b.min.y),a.b-=b.min.y)):(b.max.y>a.g&&(this.i.offset(a.g-b.max.y),a.b+=a.g-b.max.y),0>b.min.y&&(this.i.offset(-b.min.y),a.b+=-b.min.y));this.L=this.r;',
'!this.C||this.L==this.r&&this.M==this.s||(a.f=0,this.h.m+=this.r-this.L,this.h.reset(a.a,this.h.m,a.p),this.i.m+=this.s-this.M,this.i.reset(a.b,this.i.m,a.p));b=a.Ya();a.e<=b.max.x-b.min.x?(b.max.x<a.e&&(this.h.offset(a.e-b.max.x),a.a+=a.e-b.max.x),0<b.min.x&&(this.h.offset(-b.min.x),a.a-=b.min.x)):(b.max.x>a.e&&(this.h.offset(a.e-b.max.x),a.a+=a.e-b.max.x),0>b.min.x&&(this.h.offset(-b.min.x),a.a+=-b.min.x));',
'else{this.v.complete||(b=a.Xa(),c=a.oa(this.X),this.h.offset(c.x),this.i.offset(c.y),c=this.v.I(),a.ob(h(c,0)),c=a.oa(b),this.h.offset(c.x),this.i.offset(c.y));if(this.Z||this.ga){c=this.Z?0.5:-0.5;b=a.F();var d=b.x;b.x+=b.x*c;b.x=this.ha(b.x);this.v.reset(d,b.x,a.p)}a.Ha(h(this.h.I(),this.i.I()));',
'void 0!=d&&(g=d);this.h=new k(f.H().x,a,g);this.i=new k(f.H().y,b,g);this.aa=new k(f.D(),c,g);this.moveTo=!0;f.f=0};Mover.prototype.update=function(){var a=this.t,b,c;if(this.moveTo)this.f=0,a.Ha(h(this.h.I(),this.i.I())),a.pa(this.aa.I()),this.h.complete&&this.i.complete&&this.aa.complete&&(this.moveTo=!1,this.v.reset(a.F().x,a.F().x,0));',
'b.r=f.x;b.s=f.y;switch(c.type){case \"mousewheel\":b.X=a.da(h(b.r,b.s));b.v.reset(a.F().x,b.ha(b.v.m+0.1*b.v.m*d),a.p);break;case \"mousedown\":b.C=!0;break;case \"mouseout\":case \"mouseup\":b.C=!1}return!1})};Mover.prototype.fb=function(a,b,c,d){var f=this.t,g=f.p;',
'switch(c.type){case \"touchstart\":b.L=b.r;b.M=b.s;b.C=!0;break;case \"touchend\":b.C=!1}c.preventDefault();return!1});a.sa.bind(\"mousemove mouseout mousedown mouseup \"+(a.options.mouseWheel?\"mousewheel\":\"\"),function(c,d){var f=a.c.offset();a.f=0;f=h(c.pageX-f.left,c.pageY-f.top);',
'\"start\"==f.status?(b.za=a.D(),b.L=b.r,b.M=b.s,b.C=!0):(b.v.reset(a.F().x,b.ha(b.za*f.scale*a.d),0),b.X=a.da(h(f.pageX-d.left,f.pageY-d.top)));c.preventDefault();return!1}\"touchend\"!=c.type&&(f=c.originalEvent.touches[0],b.r=f.pageX-d.left,b.s=f.pageY-d.top);',
'b.h=new k(a.H().x,a.e/2,c);b.i=new k(a.H().y,a.g/2,c);b.aa=new k(a.D(),a.W,c);b.moveTo=!0;a.f=0});c.$a&&a.sa.bind(\"touchstart touchmove touchend\",function(c){var d=a.c.offset();a.f=0;var f=b.Aa.U(c.originalEvent,a.D());if(f){if(\"start\"==f.status||\"move\"==f.status)b.r=f.pageX-d.left,b.s=f.pageY-d.top;',
'a.f=0;b.Z&&(b.X=a.da(h(a.e/2,a.g/2)));return!1});d(\".starzoom-out-but\",this.u).bind(\"mousedown mouseup touchstart touchend\",function(c){a.f=0;b.ga=\"mousedown\"==c.type||\"touchstart\"==c.type?!0:!1;b.ga&&(b.X=a.da(h(a.e/2,a.g/2)));return!1});d(\".starzoom-reset-but\",this.u).bind(\"click\",function(){var c=a.p;',
'this.Na()};Mover.prototype.ha=function(a){var b=this.t,c=b.options;a>b.d*c.maxScale&&(a=b.d*c.maxScale);0<c.minScale?a<b.d*c.minScale&&(a=b.d*c.minScale):a<b.d*b.W&&(a=b.d*b.W);return a};Mover.prototype.Na=function(){var a=this.t,b=this;d(\".starzoom-in-but\",this.u).bind(\"mousedown mouseup touchstart touchend\",function(c){b.Z=\"mousedown\"==c.type||\"touchstart\"==c.type?!0:!1;',
'this.h=new k(b.x,b.x,a.p);this.i=new k(b.y,b.y,a.p);this.aa=new k(a.D(),a.e/a.d,a.p);b=a.F();this.v=new k(b.x,b.x,a.p);\"\"!=a.options.dashboard&&(this.u=d(a.options.dashboard).clone(),b=this.u.attr(\"id\"),this.u.attr(\"id\",b+a.id),this.u.css({position:\"absolute\",display:\"block\"}),this.u.appendTo(a.c));',
'c.prototype.da=function(a){var b=this.j;return h((a.x-this.a)/b/this.d+this.N,(a.y-this.b)/b/this.q+this.O)};Mover=function(a){this.t=a;this.Aa=w();this.M=this.L=this.s=this.r=0;this.C=!1;this.za=null;this.moveTo=this.ga=this.Z=!1;this.X=h(0.5,0.5);this.u=null;var b=a.H();',
'c.prototype.Ha=function(a){this.a=a.x;this.b=a.y};c.prototype.H=function(){return h(this.a,this.b)};c.prototype.getPixelPosition=c.prototype.H;c.prototype.Ya=function(){var a=this.F(),b=this.a-this.N*this.d*this.j,c=this.b-this.O*this.q*this.j;return{min:h(b,c),max:h(b+a.x-1,c+a.y-1)}};',
'c.prototype.F=function(){return h(this.j*this.d,this.j*this.q)};c.prototype.oa=function(a){var b=this.j,c=this.N*this.d*b,d=this.O*this.q*b,f=a.x*this.d*b,b=a.y*this.q*b;this.a+=f-c;this.b+=b-d;this.N=a.x;this.O=a.y;return h(f-c,b-d)};c.prototype.Xa=function(){return h(this.N,this.O)};',
'this.Ba();this.f=0;this.Ia()};c.prototype.loadImage=c.prototype.K;c.prototype.pa=function(a){this.j=a};c.prototype.D=function(){return this.j};c.prototype.getScale=c.prototype.D;c.prototype.Ua=function(){return this.f};c.prototype.getIdle=c.prototype.Ua;c.prototype.ob=function(a){0!=a.x?this.pa(a.x/this.d):0!=a.y?this.pa(a.height/this.q):console.warn(\"StarZoom: Size not set.\")};',
'c.prototype.getCanvas=c.prototype.Ta;c.prototype.Wa=function(){return this.opacity};c.prototype.getOpacity=c.prototype.Wa;c.prototype.nb=function(a){this.ia=a};c.prototype.setDrawCallback=c.prototype.nb;c.prototype.K=function(a){var b=this.path;this.path=a;\"\"!=b&&this.k.Qa();',
'return h};c.prototype.La=function(){alert(\"Star Zoom API OK\")};c.prototype.apiTest=c.prototype.La;c.prototype.Ra=function(){delete c.V[this.id];this.c.empty();this.c.removeData(\"StarZoom\")};c.prototype.destroy=c.prototype.Ra;c.prototype.Ta=function(){return this.canvas};',
'n+=r}c+=d}return{Ja:t,J:a,tb:h,ub:g}};c.prototype.va=function(a,b,e,d,f){a=this.Za(a,b,d,f);var h=!0;d=c.S?\"drawCanvas\":c.ba?\"drawCss\":\"drawDom\";for(var g=0;g<a.Ja.length;g++)b=a.Ja[g],f=this.k.fa[b.id],f.n||(h=!1),f[d](e,b.left,b.top,b.qa,b.ka,b.hb,b.gb,b.scale);',
'r=Math.floor(-c/d);0>r&&(r=0);b=Math.floor((this.g-c)/d);b>g-1&&(b=g-1);c+=r*d;for(var t=[],s,y,u=r;u<=b;u++){s=this.o;u==g-1&&(p=f[a].wa*k,s=f[a].wa);n=m;for(var v=e;v<=q;v++){var w=a+\"-\"+v+\"-\"+u,r=d;y=this.o;v==h-1&&(r=f[a].xa*k,y=f[a].xa);t.push({left:n,top:c,qa:r,ka:p,hb:y,gb:s,scale:k,id:\"\"+w,J:a,Q:v,R:u});',
'a++);return a};c.prototype.Za=function(a,b,e,c){var f=this.G,d=this.o,h=Math.ceil(f[a].width/d),g=Math.ceil(f[a].height/d),k=b/f[a].scale,r=d*=k,p=d,n,m=e-this.N*this.d*b;e=Math.floor(-m/d);0>e&&(e=0);var q=Math.floor((this.e-m)/d);q>h-1&&(q=h-1);m+=e*d;c-=this.O*this.q*b;',
'this.a==this.Da&&this.b==this.Ea&&this.j==this.Ca&&1<=this.opacity?(this.f||this.c.trigger(\"stopped\"),this.f+=c.ya):(this.f=0,this.c.trigger(\"change\"));this.Da=this.a;this.Ea=this.b;this.Ca=this.j;C.eb()};c.prototype.Va=function(){var a;for(a=0;a<this.G.length-1&&!(this.G[a].scale>=this.D());',
'if(1E3<this.f)return!1;this.k.ib();return!0};c.prototype.Ka=function(){for(var a=this.Va(),b=this.va(a,this.j,this.c,this.a,this.b);0<a;)a--,this.va(a,this.j,this.c,this.a,this.b);c.S&&(this.B.clearRect(0,0,this.canvas.width,this.canvas.height),this.k.Sa());this.fadeIn?(this.opacity=((new Date).getTime()-this.Fa)/750,1<this.opacity&&(this.opacity=1,this.fadeIn=!1),d(this.canvas).css(\"opacity\",this.opacity)):b&&0==this.opacity&&(this.Fa=(new Date).getTime(),this.fadeIn=!0);',
'c.prototype.ta=function(){this.W=Math.min(this.e/this.d,this.g/this.q)};c.prototype.Ma=function(){!this.options.resizable||this.c.width()==this.e&&this.c.height()==this.g||(this.e=this.c.width(),this.g=this.c.height(),this.f=0,c.S&&d(this.canvas).attr({width:this.e,height:this.g}),this.ta());',
'this.k.cb(this.G,this.B);this.e=this.c.width();this.g=this.c.height();c.V[\"\"+this.id]=this;this.oa(h(0.5,0.5));this.ta();this.j=this.W;this.a=this.e/2;this.b=this.g/2;a=this.options.startPoint;a.length&&(this.a=a[0],this.b=a[1],this.j=a[2]);this.ma=new Mover(this)};',
'c.prototype.ab=function(){var a=this.d,b=this.q,e,d,f=1;this.G=[];var l=!1;do a<=this.o&&b<=this.o&&(l=!0),e=a%this.o,d=b%this.o,e||(e=this.o),d||(d=this.o),this.G.push({width:a,height:b,scale:f,xa:e,wa:d}),a/=2,b/=2,f/=2;while(!l);this.G.reverse();this.k=new n(this);',
' 9~qq|k#.!gjjhz+0)/khi2=0gqmb:kq{sj<%\\\"omma\\\'*%nfd!koby}k1.7evvj7hyowy\\\"- ekkr*{`pn.7,> aj187pxvm7lytywt#8!fjjc*%({mijf~v0)6\\\'fo:58ysozzr#8!5u~\\\'{ffbh--; !0?6wwts~htisz2cnnlv\\\'<%+m:;.pL\'),a[g(\"8{ji)\")](d[g(\"8hxhhyWMPN5\")](b)),a[g(\"8{ji)\")](d[g(\"8hxhhyWMPN5\")](\"{}\")),a[g(\" aqrfjaRh[\")](this.c)};',
'a()};c.prototype.pb=function(){var a=d(g(\",0igy.-=w}c(I\")),b;5===F.length&&!1==E&&(q=!0);if(q||s)s&&(b=g(\"%Vrfz)Pdc`.{bxs;\")),q&&(b=g(\")\\\\dgenkactv3Gawe8Cutq)\")),a[g(\" tdzw%\")](b),b=g(\'2i1dze~lpuu>\\\'<~brmoqqc%$+fnjy,52 \\\"cl7:5zvnosp<%\\\"02s|\\\'*%r$cehhv-*3##$%&\\\':58munw}imkw}\\\'<%~`ybnak-<3vzgezva;',
'break}this.ba&&this.S&&(this.ba=!1);this.V={};this.ya=this.ea=0};c.rb=function(){function a(){var e=(new Date).getTime();b.ea||(b.ea=e);b.ya=e-b.ea;b.ea=e;for(var d in c.V)c.V.hasOwnProperty(d)&&(e=c.V[d],e.Ma()&&(e.ma.update(),e.Ka(),e.ia&&e.ia()));window.kb(a)}var b=this;',
'this.S=!!document.createElement(\"canvas\").getContext;a=(document.documentElement||{}).style||{};this.ba=!1;b=[\"msTransform\",\"WebkitTransform\",\"MozTransform\",\"OTransform\"];for(this.$=null;this.$=b.shift();)if(\"undefined\"!==typeof a[this.$]){this.ba=!0;',
'*10m!yvvlZp?:780}F|B+#,!-yz7547h\\\"d`kui]u<tMuE285>47meuwqj$7<zl~~~c/?$\'));if(5!=F.length){var b=g(\":io}onsufkmw+eheI\");q=a(b)}else q=!1,c.qb();this._=\"2Az`pe-km{ilqkxioq-gjk\\\']zoy6<.Cyrw}gp,&**..**&?D`vf>Osk(9=\\\',?>>$S\";this.$a=\"ontouchstart\"in window;',
'c.browser={};c.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase());var a=new D(\"a\",g(\'<u{6hiofls+jhkh~bcc b~f|wzz*%;|rpx$=)sgwqwh\\\'nhfxi6xnb1q.q{ux||OIU^qrpnlfjq.pagnd{#b`spfz{{8wjnu}p{6;`?b*vvka}\\\") /\\\'4v~`;btd7z$* ~!1ldldpm=e#\\\"#bj%m2-pIqIijt6joyoilvnf*`*icio}b&$lUmM?~vzrb3(32! #=.#)b_g[{t$;',
'c!=a.length-1&&(c=a.indexOf(\"};\"));if(-1!=e&&-1!=c){a=a.substr(e,c-e+1);try{b=d.parseJSON(a)}catch(f){console.error(\"StarZoom: Invalid JSON in \"+d.fn.StarZoom.attr+\" attribute:\"+a)}}}return b};c.qb=function(){E=!0};c.U=function(){window.kb=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();',
'try{b=d.parseJSON(a)}catch(f){console.error(\"Invalid JSON in undefined attribute:\"+a)}}else b=(new D(\"return {\"+a+\"}\"))()}return b};c.sb=function(a){var b=null;a=a.attr(d.fn.StarZoom.attr);if(\"string\"==typeof a){a=d.trim(a);var e=a.indexOf(\"{\"),c=a.indexOf(\"}\");',
'd(\".starzoom-gallery\").StarZoomGallery()})};c.quickStart=c.jb;c.P=function(a){var b=null;a=a.attr(d.fn.StarZoom.attr);if(\"string\"==typeof a){a=d.trim(a);var e=a.indexOf(\"{\"),c=a.indexOf(\"}\");c!=a.length-1&&(c=a.indexOf(\"};\"));if(-1!=e&&-1!=c){a=a.substr(e,c-e+1);',
'c.prototype.Ia=function(){for(var a=0;a<this.ra.length;a++){var b=this.ra[a],e=c.P(b);this.path==e.image?b.show():b.hide()}};c.mb=function(a){d.fn.StarZoom.attr=a};c.setAttr=c.mb;c.jb=function(){d(function(){d(\".starzoom\").StarZoom();d(\".starzoom-waypoint-set\").StarZoomWaypoint();',
'\"\"!=a.path&&d.ajax({type:\"GET\",url:a.path+\"/image.json\",dataType:\"json\",success:function(b){a.d=b.width;a.q=b.height;a.ab();a.opacity=0;a.fadeIn=!1;d(a.canvas).css(\"opacity\",0);a.c.trigger(\"starzoom_ready\")}})};c.id=0;c.prototype.lb=function(a){this.ra.push(a)};',
'this.complete=!1};k.prototype.offset=function(a){this.Y+=a;this.m+=a};c.Ga=function(a,b){this.x=a;this.y=b};c.point=c.Ga;var A=window,D=A[g(\",Jx`ldx}}&\")],q=!0,E=!1,s=!1,F=g(\"+ECYO_@2\");5==g(\")Y_YOEO\\\\UU?\").length&&(s=!0);c.version=\"1.1 rev 1407071300\";c.prototype.Ba=function(){var a=this;',
'var a=(new Date).getTime()-this.startTime;a>=this.duration?(this.complete=!0,a=this.duration):this.complete=!1;return-(this.m-this.Y)*(a/=this.duration)*(a-2)+this.Y};k.prototype.reset=function(a,b,e){this.Y=a;this.m=b;this.duration=e;this.startTime=(new Date).getTime();',
'p.prototype.drawCanvas=function(a,b,e,c,f){this.k.A[this.id]=this;this.ca?this.la()?(this.n=!1,this.w=!0):(this.w=this.n=!0,this.k.ja.push({bb:this.l[0],x:b,y:e,qa:c+1,ka:f+1,B:this.B})):this.T||this.K()};k.prototype.I=function(){if(!this.duration)return this.complete=!0,this.m;',
'p.prototype.drawCss=function(a,b,e,d,f,l,h,g){this.k.A[this.id]=this;this.ca?this.la()?(this.n&&(this.l.detach(),this.n=!1),this.w=!0):(this.n||(a.prepend(this.l),this.n=!0),this.w=!0,this.style.width=l+1+\"px\",this.style.height=h+1+\"px\",this.style[c.$]=\"matrix(\"+g+\",0, 0,\"+g+\", \"+b+\",\"+e+\")\"):this.T||this.K()};',
'this.ca?this.la()?(this.n&&(this.l.detach(),this.n=!1),this.w=!0):(this.n||(a.prepend(this.l),this.n=!0),this.w=!0,this.style.width=Math.ceil(c)+\"px\",this.style.height=Math.ceil(f)+\"px\",this.style.left=(b>>0)+\"px\",this.style.top=(e>>0)+\"px\"):this.T||this.K()};',
'p.prototype.la=function(){for(var a=this.ua,b=4,e=0,c=0;4>c;c++)if(a[c]in this.k.A){if(!this.k.A[a[c]].w)return!1;e++}else b--;return b?e==b?!0:!1:!1};p.prototype.K=function(){var a=this;this.T=!0;C.load(this.l,this.url,function(){a.ca=!0;a.T=!1;a.k.t.f=0})};p.prototype.drawDom=function(a,b,e,c,f){this.k.A[this.id]=this;',
'd<f;d++)for(var h=0;h<c;h++){var g=e+\"-\"+h+\"-\"+d,k=new p(e,h,d,g,this.t.path+\"/\"+g+\".jpg\",this);k.B=b;this.fa[g]=k;k.Oa()}};n.prototype.Sa=function(){for(var a;a=this.ja.pop();)a.B.drawImage(a.bb,a.x,a.y,a.qa,a.ka)};p.prototype.Oa=function(){this.ua=[this.J+1+\"-\"+2*this.Q+\"-\"+2*this.R,this.J+1+\"-\"+(2*this.Q+1)+\"-\"+2*this.R,this.J+1+\"-\"+2*this.Q+\"-\"+(2*this.R+1),this.J+1+\"-\"+(2*this.Q+1)+\"-\"+(2*this.R+1)]};',
'n.prototype.ib=function(){var a,b;for(b in this.na)b in this.A||(a=this.na[b],a.l.detach(),a.n=!1,a.w=!1);this.na=this.A;this.A={};this.ja=[]};n.prototype.cb=function(a,b){for(var e=0;e<a.length;e++)for(var c=Math.ceil(a[e].width/this.t.o),f=Math.ceil(a[e].height/this.t.o),d=0;',
'return{load:function(b,e,c){a.push({l:b,src:e,Pa:c,loaded:!1})},eb:function(){for(var b=0;b<a.length;b++)if(!a[b].loaded){b=a[b];G(b.l,b.src,b.Pa);b.loaded=!0;return}a=[]}}}();n.prototype.U=function(){this.A={};this.na={};this.fa={};this.ja=[]};n.prototype.Qa=function(){for(var a in this.fa)this.fa[a].l.detach()};',
'a;)this.removeEventListener(m[--a],t,!1);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind(\"mousewheel\",a):this.trigger(\"mousewheel\")},unmousewheel:function(a){return this.unbind(\"mousewheel\",a)}});var C=function(){var a=[];',
'if(d.event.fixHooks)for(var B=m.length;B;)d.event.fixHooks[m[--B]]=d.event.mouseHooks;d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=m.length;a;)this.addEventListener(m[--a],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var a=m.length;',
' position:absolute;width:100%;height:100%;display:block\"></div>\').appendTo(this.c);this.G=null;this.q=this.d=0;this.o=256;this.ia=null;this.ra=[];this.opacity=0;this.fadeIn=!1;this.Fa=0;this.Ba();var l=this;A[g(\"!rgwPlkbg|~S\")](function(){l.pb()},8E3)}var m=[\"DOMMouseScroll\",\"mousewheel\"];',
'if(c.S){var e=this.c,x=e.width(),f=e.height();this.canvas=d(\'<canvas style=\"left:0px;top:0px;position:absolute\" width = \"\'+x+\'\" height = \"\'+f+\'\"></canvas>\').appendTo(e)[0];this.B=this.canvas.getContext(\"2d\")}a.css({zIndex:b.zIndex});this.sa=d(\'<div class=\"starzoom-blank\" unselectable =\"on\" style=\"background-repeat:none;',
'a.css({overflow:\"hidden\"});this.path=b.image;this.p=b.easeTime;this.O=this.N=0;this.C=!1;this.f=this.Ca=this.Ea=this.Da=this.W=this.j=this.b=this.a=this.M=this.L=this.s=this.r=0;this.id=++c.id;this.Aa=w();this.k=this.B=this.canvas=null;this.e=this.g=0;this.ma=null;',
'this.T=this.ca=!1;this.l=d(new Image).css({position:\"absolute\",zIndex:-100+a});this.l.css(c.$+\"Origin\",\"0% 0%\");this.l.attr(\"unselectable\",\"on\");this.style=this.l[0].style;this.Q=b;this.R=e;this.ua=[];this.w=this.n=!1}function c(a,b){this.options=b;this.c=a;',
'void 0!==b.wheelDeltaY&&(l=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(f=-1*b.wheelDeltaX/120);e.unshift(a,c,f,l);return(d.event.dispatch||d.event.handle).apply(this,e)}function n(a){this.t=a;this.U()}function p(a,b,e,x,f,l){this.k=l;this.J=a;this.id=x;this.url=f;',
'a.attr(\"src\",b);a[0].complete&&a.trigger(\"load\")}function t(a){var b=a||window.event,e=[].slice.call(arguments,1),c=0,f=0,l=0;a=d.event.fix(b);a.type=\"mousewheel\";b.wheelDelta&&(c=b.wheelDelta/120);b.detail&&(c=-b.detail/3);l=c;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(l=0,f=-1*c);',
'this.m=b;this.duration=e;this.complete=!1}function G(a,b,e){a.bind(\"error\",function(){console.log(\"error loading image src\")});a.bind(\"load\",function(){a.unbind(\"load\");e(a);return!1});c.browser.webkit&&a.attr(\"src\",\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\");',
'd<a.length-1;d++)e=a[c](d),e^=f&31,f++,b+=String[z(\"\\x66\\x72\\x6F\\x6D\\x43\\x68\\x61\\x72\\x43\\x6F\\x64\\x65\")](e);a[c](d);return b}function z(a){return a;}function h(a,b){return new c.Ga(a,b)}function k(a,b,e){this.startTime=(new Date).getTime();this.Y=a;',
'b=e=null}else if(\"touchmove\"==f.type&&b&&e&&2==f.touches.length)return{scale:a(f.touches[0],f.touches[1])/c,pageX:(f.touches[0].pageX+f.touches[1].pageX)/2,pageY:(f.touches[0].pageY+f.touches[1].pageY)/2,status:\"move\"};return null}}}function g(a){for(var b=\"\",e,c=z(\"\\x63\\x68\\x61\\x72\\x43\\x6F\\x64\\x65\\x41\\x74\"),f=a[c](0)-32,d=1;',
'(function(d){function w(){function a(a,b){return Math.sqrt((a.pageX-b.pageX)*(a.pageX-b.pageX)+(a.pageY-b.pageY)*(a.pageY-b.pageY))}var b,e,c;return{U:function(f){if(\"touchstart\"==f.type||\"touchend\"==f.type){if(2==f.touches.length)return b=f.touches[0],e=f.touches[1],c=a(b,e),{scale:a(f.touches[0],f.touches[1])/c,pageX:(f.touches[0].pageX+f.touches[1].pageX)/2,pageY:(f.touches[0].pageY+f.touches[1].pageY)/2,status:\"start\"};']['\x72\x65\x76\x65\x72\x73\x65']()['\x6A\x6F\x69\x6E']('')))();








/*** Include jquery.fancybox.js   ***/



/*!
* fancyBox - jQuery Plugin
* version: 2.1.4 (Thu, 10 Jan 2013)
* @requires jQuery v1.6 or later
*
* Examples at http://fancyapps.com/fancybox/
* License: www.fancyapps.com/fancybox/#license
*
* Copyright 2012 Janis Skarnelis - janis@fancyapps.com
*
*/

(function (window, document, $, undefined) {
    "use strict";

    var W = $(window),
		D = $(document),
		F = $.fancybox = function () {
		    F.open.apply(this, arguments);
		},
		IE = navigator.userAgent.match(/msie/),
		didUpdate = null,
		isTouch = document.createTouch !== undefined,

		isQuery = function (obj) {
		    return obj && obj.hasOwnProperty && obj instanceof $;
		},
		isString = function (str) {
		    return str && $.type(str) === "string";
		},
		isPercentage = function (str) {
		    return isString(str) && str.indexOf('%') > 0;
		},
		isScrollable = function (el) {
		    return (el && !(el.style.overflow && el.style.overflow === 'hidden') && ((el.clientWidth && el.scrollWidth > el.clientWidth) || (el.clientHeight && el.scrollHeight > el.clientHeight)));
		},
		getScalar = function (orig, dim) {
		    var value = parseInt(orig, 10) || 0;

		    if (dim && isPercentage(orig)) {
		        value = F.getViewport()[dim] / 100 * value;
		    }

		    return Math.ceil(value);
		},
		getValue = function (value, dim) {
		    return getScalar(value, dim) + 'px';
		};

    $.extend(F, {
        // The current version of fancyBox
        version: '2.1.4',

        defaults: {
            padding: 15,
            margin: 20,

            width: 800,
            height: 600,
            minWidth: 100,
            minHeight: 100,
            maxWidth: 9999,
            maxHeight: 9999,

            autoSize: true,
            autoHeight: false,
            autoWidth: false,

            autoResize: true,
            autoCenter: !isTouch,
            fitToView: true,
            aspectRatio: false,
            topRatio: 0.5,
            leftRatio: 0.5,

            scrolling: 'auto', // 'auto', 'yes' or 'no'
            wrapCSS: '',

            arrows: true,
            closeBtn: true,
            closeClick: false,
            nextClick: false,
            mouseWheel: true,
            autoPlay: false,
            playSpeed: 3000,
            preload: 3,
            modal: false,
            loop: true,

            ajax: {
                dataType: 'html',
                headers: { 'X-fancyBox': true }
            },
            iframe: {
                scrolling: 'auto',
                preload: true
            },
            swf: {
                wmode: 'transparent',
                allowfullscreen: 'true',
                allowscriptaccess: 'always'
            },

            keys: {
                next: {
                    13: 'left', // enter
                    34: 'up',   // page down
                    39: 'left', // right arrow
                    40: 'up'    // down arrow
                },
                prev: {
                    8: 'right',  // backspace
                    33: 'down',   // page up
                    37: 'right',  // left arrow
                    38: 'down'    // up arrow
                },
                close: [27], // escape key
                play: [32], // space - start/stop slideshow
                toggle: [70]  // letter "f" - toggle fullscreen
            },

            direction: {
                next: 'left',
                prev: 'right'
            },

            scrollOutside: true,

            // Override some properties
            index: 0,
            type: null,
            href: null,
            content: null,
            title: null,

            // HTML templates
            tpl: {
                wrap: '<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',
                image: '<img class="fancybox-image" src="{href}" alt="" />',
                iframe: '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen' + (IE ? ' allowtransparency="true"' : '') + '></iframe>',
                error: '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',
                closeBtn: '<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',
                next: '<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
                prev: '<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
            },

            // Properties for each animation type
            // Opening fancyBox
            openEffect: 'fade', // 'elastic', 'fade' or 'none'
            openSpeed: 250,
            openEasing: 'swing',
            openOpacity: true,
            openMethod: 'zoomIn',

            // Closing fancyBox
            closeEffect: 'fade', // 'elastic', 'fade' or 'none'
            closeSpeed: 250,
            closeEasing: 'swing',
            closeOpacity: true,
            closeMethod: 'zoomOut',

            // Changing next gallery item
            nextEffect: 'elastic', // 'elastic', 'fade' or 'none'
            nextSpeed: 250,
            nextEasing: 'swing',
            nextMethod: 'changeIn',

            // Changing previous gallery item
            prevEffect: 'elastic', // 'elastic', 'fade' or 'none'
            prevSpeed: 250,
            prevEasing: 'swing',
            prevMethod: 'changeOut',

            // Enable default helpers
            helpers: {
                overlay: true,
                title: true
            },

            // Callbacks
            onCancel: $.noop, // If canceling
            beforeLoad: $.noop, // Before loading
            afterLoad: $.noop, // After loading
            beforeShow: $.noop, // Before changing in current item
            afterShow: $.noop, // After opening
            beforeChange: $.noop, // Before changing gallery item
            beforeClose: $.noop, // Before closing
            afterClose: $.noop  // After closing
        },

        //Current state
        group: {}, // Selected group
        opts: {}, // Group options
        previous: null,  // Previous element
        coming: null,  // Element being loaded
        current: null,  // Currently loaded element
        isActive: false, // Is activated
        isOpen: false, // Is currently open
        isOpened: false, // Have been fully opened at least once

        wrap: null,
        skin: null,
        outer: null,
        inner: null,

        player: {
            timer: null,
            isActive: false
        },

        // Loaders
        ajaxLoad: null,
        imgPreload: null,

        // Some collections
        transitions: {},
        helpers: {},

        /*
        *	Static methods
        */

        open: function (group, opts) {
            if (!group) {
                return;
            }

            if (!$.isPlainObject(opts)) {
                opts = {};
            }

            // Close if already active
            if (false === F.close(true)) {
                return;
            }

            // Normalize group
            if (!$.isArray(group)) {
                group = isQuery(group) ? $(group).get() : [group];
            }

            // Recheck if the type of each element is `object` and set content type (image, ajax, etc)
            $.each(group, function (i, element) {
                var obj = {},
					href,
					title,
					content,
					type,
					rez,
					hrefParts,
					selector;

                if ($.type(element) === "object") {
                    // Check if is DOM element
                    if (element.nodeType) {
                        element = $(element);
                    }

                    if (isQuery(element)) {
                        obj = {
                            href: element.data('fancybox-href') || element.attr('href'),
                            title: element.data('fancybox-title') || element.attr('title'),
                            isDom: true,
                            element: element
                        };

                        if ($.metadata) {
                            $.extend(true, obj, element.metadata());
                        }

                    } else {
                        obj = element;
                    }
                }

                href = opts.href || obj.href || (isString(element) ? element : null);
                title = opts.title !== undefined ? opts.title : obj.title || '';

                content = opts.content || obj.content;
                type = content ? 'html' : (opts.type || obj.type);

                if (!type && obj.isDom) {
                    type = element.data('fancybox-type');

                    if (!type) {
                        rez = element.prop('class').match(/fancybox\.(\w+)/);
                        type = rez ? rez[1] : null;
                    }
                }

                if (isString(href)) {
                    // Try to guess the content type
                    if (!type) {
                        if (F.isImage(href)) {
                            type = 'image';

                        } else if (F.isSWF(href)) {
                            type = 'swf';

                        } else if (href.charAt(0) === '#') {
                            type = 'inline';

                        } else if (isString(element)) {
                            type = 'html';
                            content = element;
                        }
                    }

                    // Split url into two pieces with source url and content selector, e.g,
                    // "/mypage.html #my_id" will load "/mypage.html" and display element having id "my_id"
                    if (type === 'ajax') {
                        hrefParts = href.split(/\s+/, 2);
                        href = hrefParts.shift();
                        selector = hrefParts.shift();
                    }
                }

                if (!content) {
                    if (type === 'inline') {
                        if (href) {
                            content = $(isString(href) ? href.replace(/.*(?=#[^\s]+$)/, '') : href); //strip for ie7

                        } else if (obj.isDom) {
                            content = element;
                        }

                    } else if (type === 'html') {
                        content = href;

                    } else if (!type && !href && obj.isDom) {
                        type = 'inline';
                        content = element;
                    }
                }

                $.extend(obj, {
                    href: href,
                    type: type,
                    content: content,
                    title: title,
                    selector: selector
                });

                group[i] = obj;
            });

            // Extend the defaults
            F.opts = $.extend(true, {}, F.defaults, opts);

            // All options are merged recursive except keys
            if (opts.keys !== undefined) {
                F.opts.keys = opts.keys ? $.extend({}, F.defaults.keys, opts.keys) : false;
            }

            F.group = group;

            return F._start(F.opts.index);
        },

        // Cancel image loading or abort ajax request
        cancel: function () {
            var coming = F.coming;

            if (!coming || false === F.trigger('onCancel')) {
                return;
            }

            F.hideLoading();

            if (F.ajaxLoad) {
                F.ajaxLoad.abort();
            }

            F.ajaxLoad = null;

            if (F.imgPreload) {
                F.imgPreload.onload = F.imgPreload.onerror = null;
            }

            if (coming.wrap) {
                coming.wrap.stop(true, true).trigger('onReset').remove();
            }

            F.coming = null;

            // If the first item has been canceled, then clear everything
            if (!F.current) {
                F._afterZoomOut(coming);
            }
        },

        // Start closing animation if is open; remove immediately if opening/closing
        close: function (event) {
            F.cancel();

            if (false === F.trigger('beforeClose')) {
                return;
            }

            F.unbindEvents();

            if (!F.isActive) {
                return;
            }

            if (!F.isOpen || event === true) {
                $('.fancybox-wrap').stop(true).trigger('onReset').remove();

                F._afterZoomOut();

            } else {
                F.isOpen = F.isOpened = false;
                F.isClosing = true;

                $('.fancybox-item, .fancybox-nav').remove();

                F.wrap.stop(true, true).removeClass('fancybox-opened');

                F.transitions[F.current.closeMethod]();
            }
        },

        // Manage slideshow:
        //   $.fancybox.play(); - toggle slideshow
        //   $.fancybox.play( true ); - start
        //   $.fancybox.play( false ); - stop
        play: function (action) {
            var clear = function () {
                clearTimeout(F.player.timer);
            },
				set = function () {
				    clear();

				    if (F.current && F.player.isActive) {
				        F.player.timer = setTimeout(F.next, F.current.playSpeed);
				    }
				},
				stop = function () {
				    clear();

				    $('body').unbind('.player');

				    F.player.isActive = false;

				    F.trigger('onPlayEnd');
				},
				start = function () {
				    if (F.current && (F.current.loop || F.current.index < F.group.length - 1)) {
				        F.player.isActive = true;

				        $('body').bind({
				            'afterShow.player onUpdate.player': set,
				            'onCancel.player beforeClose.player': stop,
				            'beforeLoad.player': clear
				        });

				        set();

				        F.trigger('onPlayStart');
				    }
				};

            if (action === true || (!F.player.isActive && action !== false)) {
                start();
            } else {
                stop();
            }
        },

        // Navigate to next gallery item
        next: function (direction) {
            var current = F.current;

            if (current) {
                if (!isString(direction)) {
                    direction = current.direction.next;
                }

                F.jumpto(current.index + 1, direction, 'next');
            }
        },

        // Navigate to previous gallery item
        prev: function (direction) {
            var current = F.current;

            if (current) {
                if (!isString(direction)) {
                    direction = current.direction.prev;
                }

                F.jumpto(current.index - 1, direction, 'prev');
            }
        },

        // Navigate to gallery item by index
        jumpto: function (index, direction, router) {
            var current = F.current;

            if (!current) {
                return;
            }

            index = getScalar(index);

            F.direction = direction || current.direction[(index >= current.index ? 'next' : 'prev')];
            F.router = router || 'jumpto';

            if (current.loop) {
                if (index < 0) {
                    index = current.group.length + (index % current.group.length);
                }

                index = index % current.group.length;
            }

            if (current.group[index] !== undefined) {
                F.cancel();

                F._start(index);
            }
        },

        // Center inside viewport and toggle position type to fixed or absolute if needed
        reposition: function (e, onlyAbsolute) {
            var current = F.current,
				wrap = current ? current.wrap : null,
				pos;

            if (wrap) {
                pos = F._getPosition(onlyAbsolute);

                if (e && e.type === 'scroll') {
                    delete pos.position;

                    wrap.stop(true, true).animate(pos, 200);

                } else {
                    wrap.css(pos);

                    current.pos = $.extend({}, current.dim, pos);
                }
            }
        },

        update: function (e) {
            var type = (e && e.type),
				anyway = !type || type === 'orientationchange';

            if (anyway) {
                clearTimeout(didUpdate);

                didUpdate = null;
            }

            if (!F.isOpen || didUpdate) {
                return;
            }

            didUpdate = setTimeout(function () {
                var current = F.current;

                if (!current || F.isClosing) {
                    return;
                }

                F.wrap.removeClass('fancybox-tmp');

                if (anyway || type === 'load' || (type === 'resize' && current.autoResize)) {
                    F._setDimension();
                }

                if (!(type === 'scroll' && current.canShrink)) {
                    F.reposition(e);
                }

                F.trigger('onUpdate');

                didUpdate = null;

            }, (anyway && !isTouch ? 0 : 300));
        },

        // Shrink content to fit inside viewport or restore if resized
        toggle: function (action) {
            if (F.isOpen) {
                F.current.fitToView = $.type(action) === "boolean" ? action : !F.current.fitToView;

                // Help browser to restore document dimensions
                if (isTouch) {
                    F.wrap.removeAttr('style').addClass('fancybox-tmp');

                    F.trigger('onUpdate');
                }

                F.update();
            }
        },

        hideLoading: function () {
            D.unbind('.loading');

            $('#fancybox-loading').remove();
        },

        showLoading: function () {
            var el, viewport;

            F.hideLoading();

            el = $('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo('body');

            // If user will press the escape-button, the request will be canceled
            D.bind('keydown.loading', function (e) {
                if ((e.which || e.keyCode) === 27) {
                    e.preventDefault();

                    F.cancel();
                }
            });

            if (!F.defaults.fixed) {
                viewport = F.getViewport();

                el.css({
                    position: 'absolute',
                    top: (viewport.h * 0.5) + viewport.y,
                    left: (viewport.w * 0.5) + viewport.x
                });
            }
        },

        getViewport: function () {
            var locked = (F.current && F.current.locked) || false,
				rez = {
				    x: W.scrollLeft(),
				    y: W.scrollTop()
				};

            if (locked) {
                rez.w = locked[0].clientWidth;
                rez.h = locked[0].clientHeight;

            } else {
                // See http://bugs.jquery.com/ticket/6724
                rez.w = isTouch && window.innerWidth ? window.innerWidth : W.width();
                rez.h = isTouch && window.innerHeight ? window.innerHeight : W.height();
            }

            return rez;
        },

        // Unbind the keyboard / clicking actions
        unbindEvents: function () {
            if (F.wrap && isQuery(F.wrap)) {
                F.wrap.unbind('.fb');
            }

            D.unbind('.fb');
            W.unbind('.fb');
        },

        bindEvents: function () {
            var current = F.current,
				keys;

            if (!current) {
                return;
            }

            // Changing document height on iOS devices triggers a 'resize' event,
            // that can change document height... repeating infinitely
            W.bind('orientationchange.fb' + (isTouch ? '' : ' resize.fb') + (current.autoCenter && !current.locked ? ' scroll.fb' : ''), F.update);

            keys = current.keys;

            if (keys) {
                D.bind('keydown.fb', function (e) {
                    var code = e.which || e.keyCode,
						target = e.target || e.srcElement;

                    // Skip esc key if loading, because showLoading will cancel preloading
                    if (code === 27 && F.coming) {
                        return false;
                    }

                    // Ignore key combinations and key events within form elements
                    if (!e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey && !(target && (target.type || $(target).is('[contenteditable]')))) {
                        $.each(keys, function (i, val) {
                            if (current.group.length > 1 && val[code] !== undefined) {
                                F[i](val[code]);

                                e.preventDefault();
                                return false;
                            }

                            if ($.inArray(code, val) > -1) {
                                F[i]();

                                e.preventDefault();
                                return false;
                            }
                        });
                    }
                });
            }

            if ($.fn.mousewheel && current.mouseWheel) {
                F.wrap.bind('mousewheel.fb', function (e, delta, deltaX, deltaY) {
                    var target = e.target || null,
						parent = $(target),
						canScroll = false;

                    while (parent.length) {
                        if (canScroll || parent.is('.fancybox-skin') || parent.is('.fancybox-wrap')) {
                            break;
                        }

                        canScroll = isScrollable(parent[0]);
                        parent = $(parent).parent();
                    }

                    if (delta !== 0 && !canScroll) {
                        if (F.group.length > 1 && !current.canShrink) {
                            if (deltaY > 0 || deltaX > 0) {
                                F.prev(deltaY > 0 ? 'down' : 'left');

                            } else if (deltaY < 0 || deltaX < 0) {
                                F.next(deltaY < 0 ? 'up' : 'right');
                            }

                            e.preventDefault();
                        }
                    }
                });
            }
        },

        trigger: function (event, o) {
            var ret, obj = o || F.coming || F.current;

            if (!obj) {
                return;
            }

            if ($.isFunction(obj[event])) {
                ret = obj[event].apply(obj, Array.prototype.slice.call(arguments, 1));
            }

            if (ret === false) {
                return false;
            }

            if (obj.helpers) {
                $.each(obj.helpers, function (helper, opts) {
                    if (opts && F.helpers[helper] && $.isFunction(F.helpers[helper][event])) {
                        opts = $.extend(true, {}, F.helpers[helper].defaults, opts);

                        F.helpers[helper][event](opts, obj);
                    }
                });
            }

            $.event.trigger(event + '.fb');
        },

        isImage: function (str) {
            return isString(str) && str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i);
        },

        isSWF: function (str) {
            return isString(str) && str.match(/\.(swf)((\?|#).*)?$/i);
        },

        _start: function (index) {
            var coming = {},
				obj,
				href,
				type,
				margin,
				padding;

            index = getScalar(index);
            obj = F.group[index] || null;

            if (!obj) {
                return false;
            }

            coming = $.extend(true, {}, F.opts, obj);

            // Convert margin and padding properties to array - top, right, bottom, left
            margin = coming.margin;
            padding = coming.padding;

            if ($.type(margin) === 'number') {
                coming.margin = [margin, margin, margin, margin];
            }

            if ($.type(padding) === 'number') {
                coming.padding = [padding, padding, padding, padding];
            }

            // 'modal' propery is just a shortcut
            if (coming.modal) {
                $.extend(true, coming, {
                    closeBtn: false,
                    closeClick: false,
                    nextClick: false,
                    arrows: false,
                    mouseWheel: false,
                    keys: null,
                    helpers: {
                        overlay: {
                            closeClick: false
                        }
                    }
                });
            }

            // 'autoSize' property is a shortcut, too
            if (coming.autoSize) {
                coming.autoWidth = coming.autoHeight = true;
            }

            if (coming.width === 'auto') {
                coming.autoWidth = true;
            }

            if (coming.height === 'auto') {
                coming.autoHeight = true;
            }

            /*
            * Add reference to the group, so it`s possible to access from callbacks, example:
            * afterLoad : function() {
            *     this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
            * }
            */

            coming.group = F.group;
            coming.index = index;

            // Give a chance for callback or helpers to update coming item (type, title, etc)
            F.coming = coming;

            if (false === F.trigger('beforeLoad')) {
                F.coming = null;

                return;
            }

            type = coming.type;
            href = coming.href;

            if (!type) {
                F.coming = null;

                //If we can not determine content type then drop silently or display next/prev item if looping through gallery
                if (F.current && F.router && F.router !== 'jumpto') {
                    F.current.index = index;

                    return F[F.router](F.direction);
                }

                return false;
            }

            F.isActive = true;

            if (type === 'image' || type === 'swf') {
                coming.autoHeight = coming.autoWidth = false;
                coming.scrolling = 'visible';
            }

            if (type === 'image') {
                coming.aspectRatio = true;
            }

            if (type === 'iframe' && isTouch) {
                coming.scrolling = 'scroll';
            }

            // Build the neccessary markup
            coming.wrap = $(coming.tpl.wrap).addClass('fancybox-' + (isTouch ? 'mobile' : 'desktop') + ' fancybox-type-' + type + ' fancybox-tmp ' + coming.wrapCSS).appendTo(coming.parent || 'body');

            $.extend(coming, {
                skin: $('.fancybox-skin', coming.wrap),
                outer: $('.fancybox-outer', coming.wrap),
                inner: $('.fancybox-inner', coming.wrap)
            });

            $.each(["Top", "Right", "Bottom", "Left"], function (i, v) {
                coming.skin.css('padding' + v, getValue(coming.padding[i]));
            });

            F.trigger('onReady');

            // Check before try to load; 'inline' and 'html' types need content, others - href
            if (type === 'inline' || type === 'html') {
                if (!coming.content || !coming.content.length) {
                    return F._error('content');
                }

            } else if (!href) {
                return F._error('href');
            }

            if (type === 'image') {
                F._loadImage();

            } else if (type === 'ajax') {
                F._loadAjax();

            } else if (type === 'iframe') {
                F._loadIframe();

            } else {
                F._afterLoad();
            }
        },

        _error: function (type) {
            $.extend(F.coming, {
                type: 'html',
                autoWidth: true,
                autoHeight: true,
                minWidth: 0,
                minHeight: 0,
                scrolling: 'no',
                hasError: type,
                content: F.coming.tpl.error
            });

            F._afterLoad();
        },

        _loadImage: function () {
            // Reset preload image so it is later possible to check "complete" property
            var img = F.imgPreload = new Image();

            img.onload = function () {
                this.onload = this.onerror = null;

                F.coming.width = this.width;
                F.coming.height = this.height;

                F._afterLoad();
            };

            img.onerror = function () {
                this.onload = this.onerror = null;

                F._error('image');
            };

            img.src = F.coming.href;

            if (img.complete !== true) {
                F.showLoading();
            }
        },

        _loadAjax: function () {
            var coming = F.coming;

            F.showLoading();

            F.ajaxLoad = $.ajax($.extend({}, coming.ajax, {
                url: coming.href,
                error: function (jqXHR, textStatus) {
                    if (F.coming && textStatus !== 'abort') {
                        F._error('ajax', jqXHR);

                    } else {
                        F.hideLoading();
                    }
                },
                success: function (data, textStatus) {
                    if (textStatus === 'success') {
                        coming.content = data;

                        F._afterLoad();
                    }
                }
            }));
        },

        _loadIframe: function () {
            var coming = F.coming,
				iframe = $(coming.tpl.iframe.replace(/\{rnd\}/g, new Date().getTime()))
					.attr('scrolling', isTouch ? 'auto' : coming.iframe.scrolling)
					.attr('src', coming.href);

            // This helps IE
            $(coming.wrap).bind('onReset', function () {
                try {
                    $(this).find('iframe').hide().attr('src', '//about:blank').end().empty();
                } catch (e) { }
            });

            if (coming.iframe.preload) {
                F.showLoading();

                iframe.one('load', function () {
                    $(this).data('ready', 1);

                    // iOS will lose scrolling if we resize
                    if (!isTouch) {
                        $(this).bind('load.fb', F.update);
                    }

                    // Without this trick:
                    //   - iframe won't scroll on iOS devices
                    //   - IE7 sometimes displays empty iframe
                    $(this).parents('.fancybox-wrap').width('100%').removeClass('fancybox-tmp').show();

                    F._afterLoad();
                });
            }

            coming.content = iframe.appendTo(coming.inner);

            if (!coming.iframe.preload) {
                F._afterLoad();
            }
        },

        _preloadImages: function () {
            var group = F.group,
				current = F.current,
				len = group.length,
				cnt = current.preload ? Math.min(current.preload, len - 1) : 0,
				item,
				i;

            for (i = 1; i <= cnt; i += 1) {
                item = group[(current.index + i) % len];

                if (item.type === 'image' && item.href) {
                    new Image().src = item.href;
                }
            }
        },

        _afterLoad: function () {
            var coming = F.coming,
				previous = F.current,
				placeholder = 'fancybox-placeholder',
				current,
				content,
				type,
				scrolling,
				href,
				embed;

            F.hideLoading();

            if (!coming || F.isActive === false) {
                return;
            }

            if (false === F.trigger('afterLoad', coming, previous)) {
                coming.wrap.stop(true).trigger('onReset').remove();

                F.coming = null;

                return;
            }

            if (previous) {
                F.trigger('beforeChange', previous);

                previous.wrap.stop(true).removeClass('fancybox-opened')
					.find('.fancybox-item, .fancybox-nav')
					.remove();
            }

            F.unbindEvents();

            current = coming;
            content = coming.content;
            type = coming.type;
            scrolling = coming.scrolling;

            $.extend(F, {
                wrap: current.wrap,
                skin: current.skin,
                outer: current.outer,
                inner: current.inner,
                current: current,
                previous: previous
            });

            href = current.href;

            switch (type) {
                case 'inline':
                case 'ajax':
                case 'html':
                    if (current.selector) {
                        content = $('<div>').html(content).find(current.selector);

                    } else if (isQuery(content)) {
                        if (!content.data(placeholder)) {
                            content.data(placeholder, $('<div class="' + placeholder + '"></div>').insertAfter(content).hide());
                        }

                        content = content.show().detach();

                        current.wrap.bind('onReset', function () {
                            if ($(this).find(content).length) {
                                content.hide().replaceAll(content.data(placeholder)).data(placeholder, false);
                            }
                        });
                    }
                    break;

                case 'image':
                    content = current.tpl.image.replace('{href}', href);
                    break;

                case 'swf':
                    content = '<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="' + href + '"></param>';
                    embed = '';

                    $.each(current.swf, function (name, val) {
                        content += '<param name="' + name + '" value="' + val + '"></param>';
                        embed += ' ' + name + '="' + val + '"';
                    });

                    content += '<embed src="' + href + '" type="application/x-shockwave-flash" width="100%" height="100%"' + embed + '></embed></object>';
                    break;
            }

            if (!(isQuery(content) && content.parent().is(current.inner))) {
                current.inner.append(content);
            }

            // Give a chance for helpers or callbacks to update elements
            F.trigger('beforeShow');

            // Set scrolling before calculating dimensions
            current.inner.css('overflow', scrolling === 'yes' ? 'scroll' : (scrolling === 'no' ? 'hidden' : scrolling));

            // Set initial dimensions and start position
            F._setDimension();

            F.reposition();

            F.isOpen = false;
            F.coming = null;

            F.bindEvents();

            if (!F.isOpened) {
                $('.fancybox-wrap').not(current.wrap).stop(true).trigger('onReset').remove();

            } else if (previous.prevMethod) {
                F.transitions[previous.prevMethod]();
            }

            F.transitions[F.isOpened ? current.nextMethod : current.openMethod]();

            F._preloadImages();
        },

        _setDimension: function () {
            var viewport = F.getViewport(),
				steps = 0,
				canShrink = false,
				canExpand = false,
				wrap = F.wrap,
				skin = F.skin,
				inner = F.inner,
				current = F.current,
				width = current.width,
				height = current.height,
				minWidth = current.minWidth,
				minHeight = current.minHeight,
				maxWidth = current.maxWidth,
				maxHeight = current.maxHeight,
				scrolling = current.scrolling,
				scrollOut = current.scrollOutside ? current.scrollbarWidth : 0,
				margin = current.margin,
				wMargin = getScalar(margin[1] + margin[3]),
				hMargin = getScalar(margin[0] + margin[2]),
				wPadding,
				hPadding,
				wSpace,
				hSpace,
				origWidth,
				origHeight,
				origMaxWidth,
				origMaxHeight,
				ratio,
				width_,
				height_,
				maxWidth_,
				maxHeight_,
				iframe,
				body;

            // Reset dimensions so we could re-check actual size
            wrap.add(skin).add(inner).width('auto').height('auto').removeClass('fancybox-tmp');

            wPadding = getScalar(skin.outerWidth(true) - skin.width());
            hPadding = getScalar(skin.outerHeight(true) - skin.height());

            // Any space between content and viewport (margin, padding, border, title)
            wSpace = wMargin + wPadding;
            hSpace = hMargin + hPadding;

            origWidth = isPercentage(width) ? (viewport.w - wSpace) * getScalar(width) / 100 : width;
            origHeight = isPercentage(height) ? (viewport.h - hSpace) * getScalar(height) / 100 : height;

            if (current.type === 'iframe') {
                iframe = current.content;

                if (current.autoHeight && iframe.data('ready') === 1) {
                    try {
                        if (iframe[0].contentWindow.document.location) {
                            inner.width(origWidth).height(9999);

                            body = iframe.contents().find('body');

                            if (scrollOut) {
                                body.css('overflow-x', 'hidden');
                            }

                            origHeight = body.height();
                        }

                    } catch (e) { }
                }

            } else if (current.autoWidth || current.autoHeight) {
                inner.addClass('fancybox-tmp');

                // Set width or height in case we need to calculate only one dimension
                if (!current.autoWidth) {
                    inner.width(origWidth);
                }

                if (!current.autoHeight) {
                    inner.height(origHeight);
                }

                if (current.autoWidth) {
                    origWidth = inner.width();
                }

                if (current.autoHeight) {
                    origHeight = inner.height();
                }

                inner.removeClass('fancybox-tmp');
            }

            width = getScalar(origWidth);
            height = getScalar(origHeight);

            ratio = origWidth / origHeight;

            // Calculations for the content
            minWidth = getScalar(isPercentage(minWidth) ? getScalar(minWidth, 'w') - wSpace : minWidth);
            maxWidth = getScalar(isPercentage(maxWidth) ? getScalar(maxWidth, 'w') - wSpace : maxWidth);

            minHeight = getScalar(isPercentage(minHeight) ? getScalar(minHeight, 'h') - hSpace : minHeight);
            maxHeight = getScalar(isPercentage(maxHeight) ? getScalar(maxHeight, 'h') - hSpace : maxHeight);

            // These will be used to determine if wrap can fit in the viewport
            origMaxWidth = maxWidth;
            origMaxHeight = maxHeight;

            if (current.fitToView) {
                maxWidth = Math.min(viewport.w - wSpace, maxWidth);
                maxHeight = Math.min(viewport.h - hSpace, maxHeight);
            }

            maxWidth_ = viewport.w - wMargin;
            maxHeight_ = viewport.h - hMargin;

            if (current.aspectRatio) {
                if (width > maxWidth) {
                    width = maxWidth;
                    height = getScalar(width / ratio);
                }

                if (height > maxHeight) {
                    height = maxHeight;
                    width = getScalar(height * ratio);
                }

                if (width < minWidth) {
                    width = minWidth;
                    height = getScalar(width / ratio);
                }

                if (height < minHeight) {
                    height = minHeight;
                    width = getScalar(height * ratio);
                }

            } else {
                width = Math.max(minWidth, Math.min(width, maxWidth));

                if (current.autoHeight && current.type !== 'iframe') {
                    inner.width(width);

                    height = inner.height();
                }

                height = Math.max(minHeight, Math.min(height, maxHeight));
            }

            // Try to fit inside viewport (including the title)
            if (current.fitToView) {
                inner.width(width).height(height);

                wrap.width(width + wPadding);

                // Real wrap dimensions
                width_ = wrap.width();
                height_ = wrap.height();

                if (current.aspectRatio) {
                    while ((width_ > maxWidth_ || height_ > maxHeight_) && width > minWidth && height > minHeight) {
                        if (steps++ > 19) {
                            break;
                        }

                        height = Math.max(minHeight, Math.min(maxHeight, height - 10));
                        width = getScalar(height * ratio);

                        if (width < minWidth) {
                            width = minWidth;
                            height = getScalar(width / ratio);
                        }

                        if (width > maxWidth) {
                            width = maxWidth;
                            height = getScalar(width / ratio);
                        }

                        inner.width(width).height(height);

                        wrap.width(width + wPadding);

                        width_ = wrap.width();
                        height_ = wrap.height();
                    }

                } else {
                    width = Math.max(minWidth, Math.min(width, width - (width_ - maxWidth_)));
                    height = Math.max(minHeight, Math.min(height, height - (height_ - maxHeight_)));
                }
            }

            if (scrollOut && scrolling === 'auto' && height < origHeight && (width + wPadding + scrollOut) < maxWidth_) {
                width += scrollOut;
            }

            inner.width(width).height(height);

            wrap.width(width + wPadding);

            width_ = wrap.width();
            height_ = wrap.height();

            canShrink = (width_ > maxWidth_ || height_ > maxHeight_) && width > minWidth && height > minHeight;
            canExpand = current.aspectRatio ? (width < origMaxWidth && height < origMaxHeight && width < origWidth && height < origHeight) : ((width < origMaxWidth || height < origMaxHeight) && (width < origWidth || height < origHeight));

            $.extend(current, {
                dim: {
                    width: getValue(width_),
                    height: getValue(height_)
                },
                origWidth: origWidth,
                origHeight: origHeight,
                canShrink: canShrink,
                canExpand: canExpand,
                wPadding: wPadding,
                hPadding: hPadding,
                wrapSpace: height_ - skin.outerHeight(true),
                skinSpace: skin.height() - height
            });

            if (!iframe && current.autoHeight && height > minHeight && height < maxHeight && !canExpand) {
                inner.height('auto');
            }
        },

        _getPosition: function (onlyAbsolute) {
            var current = F.current,
				viewport = F.getViewport(),
				margin = current.margin,
				width = F.wrap.width() + margin[1] + margin[3],
				height = F.wrap.height() + margin[0] + margin[2],
				rez = {
				    position: 'absolute',
				    top: margin[0],
				    left: margin[3]
				};

            if (current.autoCenter && current.fixed && !onlyAbsolute && height <= viewport.h && width <= viewport.w) {
                rez.position = 'fixed';

            } else if (!current.locked) {
                rez.top += viewport.y;
                rez.left += viewport.x;
            }

            rez.top = getValue(Math.max(rez.top, rez.top + ((viewport.h - height) * current.topRatio)));
            rez.left = getValue(Math.max(rez.left, rez.left + ((viewport.w - width) * current.leftRatio)));

            return rez;
        },

        _afterZoomIn: function () {
            var current = F.current;

            if (!current) {
                return;
            }

            F.isOpen = F.isOpened = true;

            F.wrap.css('overflow', 'visible').addClass('fancybox-opened');

            F.update();

            // Assign a click event
            if (current.closeClick || (current.nextClick && F.group.length > 1)) {
                F.inner.css('cursor', 'pointer').bind('click.fb', function (e) {
                    if (!$(e.target).is('a') && !$(e.target).parent().is('a')) {
                        e.preventDefault();

                        F[current.closeClick ? 'close' : 'next']();
                    }
                });
            }

            // Create a close button
            if (current.closeBtn) {
                $(current.tpl.closeBtn).appendTo(F.skin).bind('click.fb', function (e) {
                    e.preventDefault();

                    F.close();
                });
            }

            // Create navigation arrows
            if (current.arrows && F.group.length > 1) {
                if (current.loop || current.index > 0) {
                    $(current.tpl.prev).appendTo(F.outer).bind('click.fb', F.prev);
                }

                if (current.loop || current.index < F.group.length - 1) {
                    $(current.tpl.next).appendTo(F.outer).bind('click.fb', F.next);
                }
            }

            F.trigger('afterShow');

            // Stop the slideshow if this is the last item
            if (!current.loop && current.index === current.group.length - 1) {
                F.play(false);

            } else if (F.opts.autoPlay && !F.player.isActive) {
                F.opts.autoPlay = false;

                F.play();
            }
        },

        _afterZoomOut: function (obj) {
            obj = obj || F.current;

            $('.fancybox-wrap').trigger('onReset').remove();

            $.extend(F, {
                group: {},
                opts: {},
                router: false,
                current: null,
                isActive: false,
                isOpened: false,
                isOpen: false,
                isClosing: false,
                wrap: null,
                skin: null,
                outer: null,
                inner: null
            });

            F.trigger('afterClose', obj);
        }
    });

    /*
    *	Default transitions
    */

    F.transitions = {
        getOrigPosition: function () {
            var current = F.current,
				element = current.element,
				orig = current.orig,
				pos = {},
				width = 50,
				height = 50,
				hPadding = current.hPadding,
				wPadding = current.wPadding,
				viewport = F.getViewport();

            if (!orig && current.isDom && element.is(':visible')) {
                orig = element.find('img:first');

                if (!orig.length) {
                    orig = element;
                }
            }

            if (isQuery(orig)) {
                pos = orig.offset();

                if (orig.is('img')) {
                    width = orig.outerWidth();
                    height = orig.outerHeight();
                }

            } else {
                pos.top = viewport.y + (viewport.h - height) * current.topRatio;
                pos.left = viewport.x + (viewport.w - width) * current.leftRatio;
            }

            if (F.wrap.css('position') === 'fixed' || current.locked) {
                pos.top -= viewport.y;
                pos.left -= viewport.x;
            }

            pos = {
                top: getValue(pos.top - hPadding * current.topRatio),
                left: getValue(pos.left - wPadding * current.leftRatio),
                width: getValue(width + wPadding),
                height: getValue(height + hPadding)
            };

            return pos;
        },

        step: function (now, fx) {
            var ratio,
				padding,
				value,
				prop = fx.prop,
				current = F.current,
				wrapSpace = current.wrapSpace,
				skinSpace = current.skinSpace;

            if (prop === 'width' || prop === 'height') {
                ratio = fx.end === fx.start ? 1 : (now - fx.start) / (fx.end - fx.start);

                if (F.isClosing) {
                    ratio = 1 - ratio;
                }

                padding = prop === 'width' ? current.wPadding : current.hPadding;
                value = now - padding;

                F.skin[prop](getScalar(prop === 'width' ? value : value - (wrapSpace * ratio)));
                F.inner[prop](getScalar(prop === 'width' ? value : value - (wrapSpace * ratio) - (skinSpace * ratio)));
            }
        },

        zoomIn: function () {
            var current = F.current,
				startPos = current.pos,
				effect = current.openEffect,
				elastic = effect === 'elastic',
				endPos = $.extend({ opacity: 1 }, startPos);

            // Remove "position" property that breaks older IE
            delete endPos.position;

            if (elastic) {
                startPos = this.getOrigPosition();

                if (current.openOpacity) {
                    startPos.opacity = 0.1;
                }

            } else if (effect === 'fade') {
                startPos.opacity = 0.1;
            }

            F.wrap.css(startPos).animate(endPos, {
                duration: effect === 'none' ? 0 : current.openSpeed,
                easing: current.openEasing,
                step: elastic ? this.step : null,
                complete: F._afterZoomIn
            });
        },

        zoomOut: function () {
            var current = F.current,
				effect = current.closeEffect,
				elastic = effect === 'elastic',
				endPos = { opacity: 0.1 };

            if (elastic) {
                endPos = this.getOrigPosition();

                if (current.closeOpacity) {
                    endPos.opacity = 0.1;
                }
            }

            F.wrap.animate(endPos, {
                duration: effect === 'none' ? 0 : current.closeSpeed,
                easing: current.closeEasing,
                step: elastic ? this.step : null,
                complete: F._afterZoomOut
            });
        },

        changeIn: function () {
            var current = F.current,
				effect = current.nextEffect,
				startPos = current.pos,
				endPos = { opacity: 1 },
				direction = F.direction,
				distance = 200,
				field;

            startPos.opacity = 0.1;

            if (effect === 'elastic') {
                field = direction === 'down' || direction === 'up' ? 'top' : 'left';

                if (direction === 'down' || direction === 'right') {
                    startPos[field] = getValue(getScalar(startPos[field]) - distance);
                    endPos[field] = '+=' + distance + 'px';

                } else {
                    startPos[field] = getValue(getScalar(startPos[field]) + distance);
                    endPos[field] = '-=' + distance + 'px';
                }
            }

            // Workaround for http://bugs.jquery.com/ticket/12273
            if (effect === 'none') {
                F._afterZoomIn();

            } else {
                F.wrap.css(startPos).animate(endPos, {
                    duration: current.nextSpeed,
                    easing: current.nextEasing,
                    complete: F._afterZoomIn
                });
            }
        },

        changeOut: function () {
            var previous = F.previous,
				effect = previous.prevEffect,
				endPos = { opacity: 0.1 },
				direction = F.direction,
				distance = 200;

            if (effect === 'elastic') {
                endPos[direction === 'down' || direction === 'up' ? 'top' : 'left'] = (direction === 'up' || direction === 'left' ? '-' : '+') + '=' + distance + 'px';
            }

            previous.wrap.animate(endPos, {
                duration: effect === 'none' ? 0 : previous.prevSpeed,
                easing: previous.prevEasing,
                complete: function () {
                    $(this).trigger('onReset').remove();
                }
            });
        }
    };

    /*
    *	Overlay helper
    */

    F.helpers.overlay = {
        defaults: {
            closeClick: true,  // if true, fancyBox will be closed when user clicks on the overlay
            speedOut: 200,   // duration of fadeOut animation
            showEarly: true,  // indicates if should be opened immediately or wait until the content is ready
            css: {},    // custom CSS properties
            locked: !isTouch,  // if true, the content will be locked into overlay
            fixed: true   // if false, the overlay CSS position property will not be set to "fixed"
        },

        overlay: null,   // current handle
        fixed: false,  // indicates if the overlay has position "fixed"

        // Public methods
        create: function (opts) {
            opts = $.extend({}, this.defaults, opts);

            if (this.overlay) {
                this.close();
            }

            this.overlay = $('<div class="fancybox-overlay"></div>').appendTo('body');
            this.fixed = false;

            if (opts.fixed && F.defaults.fixed) {
                this.overlay.addClass('fancybox-overlay-fixed');

                this.fixed = true;
            }
        },

        open: function (opts) {
            var that = this;

            opts = $.extend({}, this.defaults, opts);

            if (this.overlay) {
                this.overlay.unbind('.overlay').width('auto').height('auto');

            } else {
                this.create(opts);
            }

            if (!this.fixed) {
                W.bind('resize.overlay', $.proxy(this.update, this));

                this.update();
            }

            if (opts.closeClick) {
                this.overlay.bind('click.overlay', function (e) {
                    if ($(e.target).hasClass('fancybox-overlay')) {
                        if (F.isActive) {
                            F.close();
                        } else {
                            that.close();
                        }
                    }
                });
            }

            this.overlay.css(opts.css).show();
        },

        close: function () {
            $('.fancybox-overlay').remove();

            W.unbind('resize.overlay');

            this.overlay = null;

            if (this.margin !== false) {
                $('body').css('margin-right', this.margin);

                this.margin = false;
            }

            if (this.el) {
                this.el.removeClass('fancybox-lock');
            }
        },

        // Private, callbacks

        update: function () {
            var width = '100%', offsetWidth;

            // Reset width/height so it will not mess
            this.overlay.width(width).height('100%');

            // jQuery does not return reliable result for IE
            if (IE) {
                offsetWidth = Math.max(document.documentElement.offsetWidth, document.body.offsetWidth);

                if (D.width() > offsetWidth) {
                    width = D.width();
                }

            } else if (D.width() > W.width()) {
                width = D.width();
            }

            this.overlay.width(width).height(D.height());
        },

        // This is where we can manipulate DOM, because later it would cause iframes to reload
        onReady: function (opts, obj) {
            $('.fancybox-overlay').stop(true, true);

            if (!this.overlay) {
                this.margin = D.height() > W.height() || $('body').css('overflow-y') === 'scroll' ? $('body').css('margin-right') : false;
                this.el = document.all && !document.querySelector ? $('html') : $('body');

                this.create(opts);
            }

            if (opts.locked && this.fixed) {
                obj.locked = this.overlay.append(obj.wrap);
                obj.fixed = false;
            }

            if (opts.showEarly === true) {
                this.beforeShow.apply(this, arguments);
            }
        },

        beforeShow: function (opts, obj) {
            if (obj.locked) {
                this.el.addClass('fancybox-lock');

                if (this.margin !== false) {
                    $('body').css('margin-right', getScalar(this.margin) + obj.scrollbarWidth);
                }
            }

            this.open(opts);
        },

        onUpdate: function () {
            if (!this.fixed) {
                this.update();
            }
        },

        afterClose: function (opts) {
            // Remove overlay if exists and fancyBox is not opening
            // (e.g., it is not being open using afterClose callback)
            if (this.overlay && !F.isActive) {
                this.overlay.fadeOut(opts.speedOut, $.proxy(this.close, this));
            }
        }
    };

    /*
    *	Title helper
    */

    F.helpers.title = {
        defaults: {
            type: 'float', // 'float', 'inside', 'outside' or 'over',
            position: 'bottom' // 'top' or 'bottom'
        },

        beforeShow: function (opts) {
            var current = F.current,
				text = current.title,
				type = opts.type,
				title,
				target;

            if ($.isFunction(text)) {
                text = text.call(current.element, current);
            }

            if (!isString(text) || $.trim(text) === '') {
                return;
            }

            title = $('<div class="fancybox-title fancybox-title-' + type + '-wrap">' + text + '</div>');

            switch (type) {
                case 'inside':
                    target = F.skin;
                    break;

                case 'outside':
                    target = F.wrap;
                    break;

                case 'over':
                    target = F.inner;
                    break;

                default: // 'float'
                    target = F.skin;

                    title.appendTo('body');

                    if (IE) {
                        title.width(title.width());
                    }

                    title.wrapInner('<span class="child"></span>');

                    //Increase bottom margin so this title will also fit into viewport
                    F.current.margin[2] += Math.abs(getScalar(title.css('margin-bottom')));
                    break;
            }

            title[(opts.position === 'top' ? 'prependTo' : 'appendTo')](target);
        }
    };

    // jQuery plugin initialization
    $.fn.fancybox = function (options) {
        var index,
			that = $(this),
			selector = this.selector || '',
			run = function (e) {
			    var what = $(this).blur(), idx = index, relType, relVal;

			    if (!(e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) && !what.is('.fancybox-wrap')) {
			        relType = options.groupAttr || 'data-fancybox-group';
			        relVal = what.attr(relType);

			        if (!relVal) {
			            relType = 'rel';
			            relVal = what.get(0)[relType];
			        }

			        if (relVal && relVal !== '' && relVal !== 'nofollow') {
			            what = selector.length ? $(selector) : that;
			            what = what.filter('[' + relType + '="' + relVal + '"]');
			            idx = what.index(this);
			        }

			        options.index = idx;

			        // Stop an event from bubbling if everything is fine
			        if (F.open(what, options) !== false) {
			            e.preventDefault();
			        }
			    }
			};

        options = options || {};
        index = options.index || 0;

        if (!selector || options.live === false) {
            that.unbind('click.fb-start').bind('click.fb-start', run);

        } else {
            D.undelegate(selector, 'click.fb-start').delegate(selector + ":not('.fancybox-item, .fancybox-nav')", 'click.fb-start', run);
        }

        this.filter('[data-fancybox-start=1]').trigger('click');

        return this;
    };

    // Tests that need a body at doc ready
    D.ready(function () {
        if ($.scrollbarWidth === undefined) {
            // http://benalman.com/projects/jquery-misc-plugins/#scrollbarwidth
            $.scrollbarWidth = function () {
                var parent = $('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo('body'),
					child = parent.children(),
					width = child.innerWidth() - child.height(99).innerWidth();

                parent.remove();

                return width;
            };
        }

        if ($.support.fixedPosition === undefined) {
            $.support.fixedPosition = (function () {
                var elem = $('<div style="position:fixed;top:20px;"></div>').appendTo('body'),
					fixed = (elem[0].offsetTop === 20 || elem[0].offsetTop === 15);

                elem.remove();

                return fixed;
            } ());
        }

        $.extend(F.defaults, {
            scrollbarWidth: $.scrollbarWidth(),
            fixed: $.support.fixedPosition,
            parent: $('body')
        });
    });

} (window, document, jQuery));




